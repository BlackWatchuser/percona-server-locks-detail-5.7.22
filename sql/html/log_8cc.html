<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: log.cc File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">log.cc File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>logging of commands  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;log.h&quot;</code><br />
<code>#include &quot;sql_audit.h&quot;</code><br />
<code>#include &quot;sql_base.h&quot;</code><br />
<code>#include &quot;sql_class.h&quot;</code><br />
<code>#include &quot;sql_parse.h&quot;</code><br />
<code>#include &quot;sql_time.h&quot;</code><br />
<code>#include &quot;table.h&quot;</code><br />
<code>#include &quot;sp_rcontext.h&quot;</code><br />
<code>#include &quot;sp_head.h&quot;</code><br />
<code>#include &quot;binlog.h&quot;</code><br />
<code>#include &quot;sp_instr.h&quot;</code><br />
<code>#include &quot;sql_prepare.h&quot;</code><br />
<code>#include &quot;mysqld.h&quot;</code><br />
<code>#include &quot;pfs_file_provider.h&quot;</code><br />
<code>#include &quot;mysql/psi/mysql_file.h&quot;</code><br />
<code>#include &lt;string&gt;</code><br />
<code>#include &lt;sstream&gt;</code><br />
<code>#include &lt;syslog.h&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQuery__log__table__intact.html">Query_log_table_intact</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classSilence__log__table__errors.html">Silence_log_table_errors</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:abce958ef54b1f770cd058abdc2b11171"><td class="memItemLeft" align="right" valign="top"><a id="abce958ef54b1f770cd058abdc2b11171"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><b>enum_slow_query_log_table_field</b> { <br />
&#160;&#160;<b>SQLT_FIELD_START_TIME</b> = 0, 
<b>SQLT_FIELD_USER_HOST</b>, 
<b>SQLT_FIELD_QUERY_TIME</b>, 
<b>SQLT_FIELD_LOCK_TIME</b>, 
<br />
&#160;&#160;<b>SQLT_FIELD_ROWS_SENT</b>, 
<b>SQLT_FIELD_ROWS_EXAMINED</b>, 
<b>SQLT_FIELD_DATABASE</b>, 
<b>SQLT_FIELD_LAST_INSERT_ID</b>, 
<br />
&#160;&#160;<b>SQLT_FIELD_INSERT_ID</b>, 
<b>SQLT_FIELD_SERVER_ID</b>, 
<b>SQLT_FIELD_SQL_TEXT</b>, 
<b>SQLT_FIELD_THREAD_ID</b>, 
<br />
&#160;&#160;<b>SQLT_FIELD_COUNT</b>
<br />
 }</td></tr>
<tr class="separator:abce958ef54b1f770cd058abdc2b11171"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f6fc7eafe397a1bc401222eebc4ecee"><td class="memItemLeft" align="right" valign="top"><a id="a0f6fc7eafe397a1bc401222eebc4ecee"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><b>enum_general_log_table_field</b> { <br />
&#160;&#160;<b>GLT_FIELD_EVENT_TIME</b> = 0, 
<b>GLT_FIELD_USER_HOST</b>, 
<b>GLT_FIELD_THREAD_ID</b>, 
<b>GLT_FIELD_SERVER_ID</b>, 
<br />
&#160;&#160;<b>GLT_FIELD_COMMAND_TYPE</b>, 
<b>GLT_FIELD_ARGUMENT</b>, 
<b>GLT_FIELD_COUNT</b>
<br />
 }</td></tr>
<tr class="separator:a0f6fc7eafe397a1bc401222eebc4ecee"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad5337d4770466744e16d2f1d36f377dc"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log_8cc.html#ad5337d4770466744e16d2f1d36f377dc">log_syslog_find_facility</a> (char *f, SYSLOG_FACILITY *rsf)</td></tr>
<tr class="separator:ad5337d4770466744e16d2f1d36f377dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c12c66972ae38cfa54a8b6242e6387d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log_8cc.html#a3c12c66972ae38cfa54a8b6242e6387d">log_syslog_update_settings</a> ()</td></tr>
<tr class="separator:a3c12c66972ae38cfa54a8b6242e6387d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab05afa70624022ea1660a88fc805e6ff"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log_8cc.html#ab05afa70624022ea1660a88fc805e6ff">log_syslog_exit</a> (void)</td></tr>
<tr class="separator:ab05afa70624022ea1660a88fc805e6ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9200e4f7c283207dac3ee00654478158"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log_8cc.html#a9200e4f7c283207dac3ee00654478158">log_syslog_init</a> (void)</td></tr>
<tr class="separator:a9200e4f7c283207dac3ee00654478158"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2af629ac67940dc8839f8273499435e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log_8cc.html#ad2af629ac67940dc8839f8273499435e">is_valid_log_name</a> (const char *name, size_t len)</td></tr>
<tr class="separator:ad2af629ac67940dc8839f8273499435e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c28006a83045969be252194e6de2380"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log_8cc.html#a6c28006a83045969be252194e6de2380">make_query_log_name</a> (char *buff, enum_log_table_type log_type)</td></tr>
<tr class="separator:a6c28006a83045969be252194e6de2380"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93624d7ffd4d872d5e820e5b8ce8432b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log_8cc.html#a93624d7ffd4d872d5e820e5b8ce8432b">log_slow_applicable</a> (THD *thd)</td></tr>
<tr class="separator:a93624d7ffd4d872d5e820e5b8ce8432b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a129f4305c71867fb0acceb629a5e87ec"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log_8cc.html#a129f4305c71867fb0acceb629a5e87ec">log_slow_do</a> (THD *thd)</td></tr>
<tr class="separator:a129f4305c71867fb0acceb629a5e87ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61772c99fe344b2afa6d92281d114027"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log_8cc.html#a61772c99fe344b2afa6d92281d114027">log_slow_statement</a> (THD *thd)</td></tr>
<tr class="separator:a61772c99fe344b2afa6d92281d114027"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adffcb1a4793a1b3805d7fa26b4db4e1e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log_8cc.html#adffcb1a4793a1b3805d7fa26b4db4e1e">flush_error_log_messages</a> ()</td></tr>
<tr class="separator:adffcb1a4793a1b3805d7fa26b4db4e1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9d70b8f403a364bc1bc7784667bddcf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log_8cc.html#aa9d70b8f403a364bc1bc7784667bddcf">init_error_log</a> ()</td></tr>
<tr class="separator:aa9d70b8f403a364bc1bc7784667bddcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc48a1ab50960fa49837096bf14de8ea"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log_8cc.html#afc48a1ab50960fa49837096bf14de8ea">open_error_log</a> (const char *filename)</td></tr>
<tr class="separator:afc48a1ab50960fa49837096bf14de8ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fe0135f4ab5c952477d44d09aa4c8ef"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log_8cc.html#a3fe0135f4ab5c952477d44d09aa4c8ef">destroy_error_log</a> ()</td></tr>
<tr class="separator:a3fe0135f4ab5c952477d44d09aa4c8ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e8562061634d5d00f0b68b8d318ba3d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="log_8cc.html#a5e8562061634d5d00f0b68b8d318ba3d">reopen_error_log</a> ()</td></tr>
<tr class="separator:a5e8562061634d5d00f0b68b8d318ba3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5aa575418b280733418704ec34e94ae6"><td class="memItemLeft" align="right" valign="top"><a id="a5aa575418b280733418704ec34e94ae6"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>error_log_print</b> (enum loglevel level, const char *format, va_list args)</td></tr>
<tr class="separator:a5aa575418b280733418704ec34e94ae6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e88c1f62a9e97f45eb01515c9a31e3b"><td class="memItemLeft" align="right" valign="top"><a id="a8e88c1f62a9e97f45eb01515c9a31e3b"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>sql_print_error</b> (const char *format,...)</td></tr>
<tr class="separator:a8e88c1f62a9e97f45eb01515c9a31e3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8cb7d17584b91c920e91c9c188b129bf"><td class="memItemLeft" align="right" valign="top"><a id="a8cb7d17584b91c920e91c9c188b129bf"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>sql_print_warning</b> (const char *format,...)</td></tr>
<tr class="separator:a8cb7d17584b91c920e91c9c188b129bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5792800fe1276804c39a02bc34614020"><td class="memItemLeft" align="right" valign="top"><a id="a5792800fe1276804c39a02bc34614020"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>sql_print_information</b> (const char *format,...)</td></tr>
<tr class="separator:a5792800fe1276804c39a02bc34614020"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a645ed07038ca8ca3aeae825ef567ff"><td class="memItemLeft" align="right" valign="top"><a id="a3a645ed07038ca8ca3aeae825ef567ff"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>my_plugin_log_message</b> (MYSQL_PLUGIN *plugin_ptr, plugin_log_level level, const char *format,...)</td></tr>
<tr class="separator:a3a645ed07038ca8ca3aeae825ef567ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a4d0b16c5a54d55370dcefdd0f8c4706d"><td class="memItemLeft" align="right" valign="top"><a id="a4d0b16c5a54d55370dcefdd0f8c4706d"></a>
ulong&#160;</td><td class="memItemRight" valign="bottom"><b>max_binlog_files</b></td></tr>
<tr class="separator:a4d0b16c5a54d55370dcefdd0f8c4706d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5dc139f67f4edee7487f2d0309118cc"><td class="memItemLeft" align="right" valign="top"><a id="af5dc139f67f4edee7487f2d0309118cc"></a>
ulong&#160;</td><td class="memItemRight" valign="bottom"><b>max_slowlog_size</b></td></tr>
<tr class="separator:af5dc139f67f4edee7487f2d0309118cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab71300c894d527ed991df0d786bf7003"><td class="memItemLeft" align="right" valign="top"><a id="ab71300c894d527ed991df0d786bf7003"></a>
ulong&#160;</td><td class="memItemRight" valign="bottom"><b>max_slowlog_files</b></td></tr>
<tr class="separator:ab71300c894d527ed991df0d786bf7003"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2552742edb23ad2bc0bc18c7e2fa6efe"><td class="memItemLeft" align="right" valign="top"><a id="a2552742edb23ad2bc0bc18c7e2fa6efe"></a>
<a class="el" href="classQuery__logger.html">Query_logger</a>&#160;</td><td class="memItemRight" valign="bottom"><b>query_logger</b></td></tr>
<tr class="separator:a2552742edb23ad2bc0bc18c7e2fa6efe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p class="">logging of commands </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000044">Todo:</a></b></dt><dd>Abort logging when we get an error in reading or writing log files </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a3fe0135f4ab5c952477d44d09aa4c8ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3fe0135f4ab5c952477d44d09aa4c8ef">&#9670;&nbsp;</a></span>destroy_error_log()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void destroy_error_log </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p class="">Free any error log resources.</p>
<dl class="section note"><dt>Note</dt><dd>This function accesses shared resources without protection, so it should only be called while the server is running single-threaded.</dd>
<dd>
The error log can still be used after this function is called, but that should only be done single-threaded. All buffered messages should be flushed before calling this function. </dd></dl>

</div>
</div>
<a id="adffcb1a4793a1b3805d7fa26b4db4e1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adffcb1a4793a1b3805d7fa26b4db4e1e">&#9670;&nbsp;</a></span>flush_error_log_messages()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void flush_error_log_messages </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p class="">We buffer all error log messages that have been printed before the error log has been opened. This allows us to write them to the correct file once the error log has been opened.</p>
<p class="">This function will explicitly flush buffered messages to stderr. It is only needed in cases where <a class="el" href="log_8cc.html#afc48a1ab50960fa49837096bf14de8ea">open_error_log()</a> is not called as it otherwise will be done there.</p>
<p class="">This function also turns buffering off (there is no way to turn buffering back on). </p>

</div>
</div>
<a id="aa9d70b8f403a364bc1bc7784667bddcf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9d70b8f403a364bc1bc7784667bddcf">&#9670;&nbsp;</a></span>init_error_log()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void init_error_log </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p class="">Initialize structures (e.g. mutex) needed by the error log.</p>
<dl class="section note"><dt>Note</dt><dd>This function accesses shared resources without protection, so it should only be called while the server is running single-threaded.</dd>
<dd>
The error log can still be used before this function is called, but that should only be done single-threaded. </dd></dl>

</div>
</div>
<a id="ad2af629ac67940dc8839f8273499435e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2af629ac67940dc8839f8273499435e">&#9670;&nbsp;</a></span>is_valid_log_name()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool is_valid_log_name </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p class="">Check given log name against certain blacklisted names/extensions.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>Log name to check </td></tr>
    <tr><td class="paramname">len</td><td>Length of log name</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if name is valid, false otherwise. </dd></dl>

</div>
</div>
<a id="a93624d7ffd4d872d5e820e5b8ce8432b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93624d7ffd4d872d5e820e5b8ce8432b">&#9670;&nbsp;</a></span>log_slow_applicable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool log_slow_applicable </td>
          <td>(</td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>thd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p class="">Check whether we need to write the current statement (or its rewritten version if it exists) to the slow query log. As a side-effect, a digest of suppressed statements may be written.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>thread handle</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>statement needs to be logged </td></tr>
    <tr><td class="paramname">false</td><td>statement does not need to be logged </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a129f4305c71867fb0acceb629a5e87ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a129f4305c71867fb0acceb629a5e87ec">&#9670;&nbsp;</a></span>log_slow_do()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void log_slow_do </td>
          <td>(</td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>thd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p class="">Unconditionally writes the current statement (or its rewritten version if it exists) to the slow query log.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>thread handle </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a61772c99fe344b2afa6d92281d114027"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61772c99fe344b2afa6d92281d114027">&#9670;&nbsp;</a></span>log_slow_statement()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void log_slow_statement </td>
          <td>(</td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>thd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p class="">Check whether we need to write the current statement to the slow query log. If so, do so. This is a wrapper for the two functions above; most callers should use this wrapper. Only use the above functions directly if you have expensive rewriting that you only need to do if the query actually needs to be logged (e.g. SP variables / NAME_CONST substitution when executing a PROCEDURE). A digest of suppressed statements may be logged instead of the current statement.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thd</td><td>thread handle </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab05afa70624022ea1660a88fc805e6ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab05afa70624022ea1660a88fc805e6ff">&#9670;&nbsp;</a></span>log_syslog_exit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void log_syslog_exit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p class="">Stop using syslog / EventLog. Call as late as possible. </p>

</div>
</div>
<a id="ad5337d4770466744e16d2f1d36f377dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5337d4770466744e16d2f1d36f377dc">&#9670;&nbsp;</a></span>log_syslog_find_facility()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool log_syslog_find_facility </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SYSLOG_FACILITY *&#160;</td>
          <td class="paramname"><em>rsf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p class="">On being handed a syslog facility name tries to look it up. If successful, fills in a struct with the facility ID and the facility's canonical name.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">f</td><td>[in] Name of the faciltiy we're trying to look up. Lookup is case-insensitive; leading "log_" is ignored. </td></tr>
    <tr><td class="paramname">rsf</td><td>[out] A buffer in which to return the ID and canonical name.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>false No errors; buffer contains valid result true Something went wrong, no valid result set returned </dd></dl>

</div>
</div>
<a id="a9200e4f7c283207dac3ee00654478158"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9200e4f7c283207dac3ee00654478158">&#9670;&nbsp;</a></span>log_syslog_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool log_syslog_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p class="">Start using syslog / EventLog.</p>
<dl class="section return"><dt>Returns</dt><dd>true could not open syslog / EventLog with the requested characteristics false no issues encountered </dd></dl>

</div>
</div>
<a id="a3c12c66972ae38cfa54a8b6242e6387d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c12c66972ae38cfa54a8b6242e6387d">&#9670;&nbsp;</a></span>log_syslog_update_settings()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool log_syslog_update_settings </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p class="">Update syslog / Windows EventLog characteristics (on/off, identify-as, log-PIDs, facility, ...) from global variables.</p>
<dl class="section return"><dt>Returns</dt><dd>false No errors; all characteristics updated. true Unable to update characteristics. </dd></dl>

</div>
</div>
<a id="a6c28006a83045969be252194e6de2380"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c28006a83045969be252194e6de2380">&#9670;&nbsp;</a></span>make_query_log_name()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* make_query_log_name </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum_log_table_type&#160;</td>
          <td class="paramname"><em>log_type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p class="">Create the name of the query log specified.</p>
<p class="">This method forms a new path + file name for the log specified.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">buff</td><td>Location for building new string. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">log_type</td><td>QUERY_LOG_SLOW or QUERY_LOG_GENERAL</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to new string containing the name. </dd></dl>

</div>
</div>
<a id="afc48a1ab50960fa49837096bf14de8ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc48a1ab50960fa49837096bf14de8ea">&#9670;&nbsp;</a></span>open_error_log()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool open_error_log </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p class="">Open the error log and redirect stderr and optionally stdout to the error log file. The streams are reopened only for appending (writing at end of file).</p>
<dl class="section note"><dt>Note</dt><dd>This function also writes any error log messages that have been buffered by calling <a class="el" href="log_8cc.html#adffcb1a4793a1b3805d7fa26b4db4e1e">flush_error_log_messages()</a>.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>Name of error log file </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5e8562061634d5d00f0b68b8d318ba3d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e8562061634d5d00f0b68b8d318ba3d">&#9670;&nbsp;</a></span>reopen_error_log()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool reopen_error_log </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p class="">Flush any pending data to disk and reopen the error log. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
