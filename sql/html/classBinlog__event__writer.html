<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: Binlog_event_writer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classBinlog__event__writer-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Binlog_event_writer Class Reference<div class="ingroups"><a class="el" href="group__Binary__Log.html">Binary Log</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:abdbdd3929b68adde1c58d85362e79a54"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinlog__event__writer.html#abdbdd3929b68adde1c58d85362e79a54">Binlog_event_writer</a> (IO_CACHE *output_cache_arg, THD *thd_arg)</td></tr>
<tr class="separator:abdbdd3929b68adde1c58d85362e79a54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51e3a81384cdd0830e6d08a0676df008"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinlog__event__writer.html#a51e3a81384cdd0830e6d08a0676df008">write_event_part</a> (uchar **buf_p, uint32 *buf_len_p, uint32 *event_len_p)</td></tr>
<tr class="separator:a51e3a81384cdd0830e6d08a0676df008"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaec80471064cbf01336851346860ee09"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classBinlog__event__writer.html#aaec80471064cbf01336851346860ee09">write_full_event</a> (uchar *buf, uint32 buf_len)</td></tr>
<tr class="separator:aaec80471064cbf01336851346860ee09"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:ae3f6e7df74ca248704d03fc16ad950da"><td class="memItemLeft" align="right" valign="top"><a id="ae3f6e7df74ca248704d03fc16ad950da"></a>
<a class="el" href="classEvent__encrypter.html">Event_encrypter</a>&#160;</td><td class="memItemRight" valign="bottom"><b>event_encrypter</b></td></tr>
<tr class="separator:ae3f6e7df74ca248704d03fc16ad950da"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p class="">Auxiliary class to copy serialized events to the binary log and correct some of the fields that are not known until just before writing the event.</p>
<p class="">This class allows feeding events in parts, so it is practical to use in do_write_cache() which reads events from an IO_CACHE where events may span mutiple cache pages.</p>
<p class="">The following fields are fixed before writing the event:</p><ul>
<li>end_log_pos is set</li>
<li>the checksum is computed if checksums are enabled</li>
<li>the length is incremented by the checksum size if checksums are enabled </li>
</ul>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="abdbdd3929b68adde1c58d85362e79a54"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abdbdd3929b68adde1c58d85362e79a54">&#9670;&nbsp;</a></span>Binlog_event_writer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Binlog_event_writer::Binlog_event_writer </td>
          <td>(</td>
          <td class="paramtype">IO_CACHE *&#160;</td>
          <td class="paramname"><em>output_cache_arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">THD *&#160;</td>
          <td class="paramname"><em>thd_arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p class="">Constructs a new <a class="el" href="classBinlog__event__writer.html">Binlog_event_writer</a>. Should be called once before starting to flush the transaction or statement cache to the binlog.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">output_cache_arg</td><td>IO_CACHE to write to. </td></tr>
    <tr><td class="paramname">thd_arg</td><td>THD to account written binlog byte statistics to </td></tr>
    <tr><td class="paramname">have_checksum_al</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a51e3a81384cdd0830e6d08a0676df008"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51e3a81384cdd0830e6d08a0676df008">&#9670;&nbsp;</a></span>write_event_part()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Binlog_event_writer::write_event_part </td>
          <td>(</td>
          <td class="paramtype">uchar **&#160;</td>
          <td class="paramname"><em>buf_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32 *&#160;</td>
          <td class="paramname"><em>buf_len_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32 *&#160;</td>
          <td class="paramname"><em>event_len_p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p class="">Write part of an event to disk.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf_p[IN,OUT]</td><td>Points to buffer with data to write. The caller must set this initially, and it will be increased by the number of bytes written.</td></tr>
    <tr><td class="paramname">buf_len_p[IN,OUT]</td><td>Points to the remaining length of the buffer, i.e., from buf_p to the end of the buffer. The caller must set this initially, and it will be decreased by the number of written bytes.</td></tr>
    <tr><td class="paramname">event_len_p[IN,OUT]</td><td>Points to the remaining length of the event, i.e., the size of the event minus what was already written. This must be initialized to zero by the caller, must be remembered by the caller between calls, and is updated by this function: when an event begins it is set to the length of the event, and for each call it is decreased by the number of written bytes.</td></tr>
  </table>
  </dd>
</dl>
<p>It is allowed that buf_len_p is less than event_len_p (i.e., event is only partial) and that event_len_p is less than buf_len_p (i.e., there is more than this event in the buffer). This function will write as much as is available of one event, but never more than one. It is required that buf_len_p &gt;= LOG_EVENT_HEADER_LEN.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Error, i.e., my_b_write failed. </td></tr>
    <tr><td class="paramname">false</td><td>Success. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aaec80471064cbf01336851346860ee09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaec80471064cbf01336851346860ee09">&#9670;&nbsp;</a></span>write_full_event()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Binlog_event_writer::write_full_event </td>
          <td>(</td>
          <td class="paramtype">uchar *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32&#160;</td>
          <td class="paramname"><em>buf_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p class="">Write a full event to disk.</p>
<p class="">This is a wrapper around write_event_part, which handles the special case where you have a complete event in the buffer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td>Buffer to write. </td></tr>
    <tr><td class="paramname">buf_len</td><td>Number of bytes to write.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>Error, i.e., my_b_write failed. </td></tr>
    <tr><td class="paramname">false</td><td>Success. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>binlog.cc</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
