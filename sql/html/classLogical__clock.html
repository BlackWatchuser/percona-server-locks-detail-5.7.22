<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: Logical_clock Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classLogical__clock-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Logical_clock Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="rpl__trx__tracking_8h_source.html">rpl_trx_tracking.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a1d2e019f74f509ac6244cd4a6e3f1101"><td class="memItemLeft" align="right" valign="top">int64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogical__clock.html#a1d2e019f74f509ac6244cd4a6e3f1101">step</a> ()</td></tr>
<tr class="separator:a1d2e019f74f509ac6244cd4a6e3f1101"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a245c0427e7eda455da53e26c4b8a0bf9"><td class="memItemLeft" align="right" valign="top">int64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogical__clock.html#a245c0427e7eda455da53e26c4b8a0bf9">set_if_greater</a> (int64 new_val)</td></tr>
<tr class="separator:a245c0427e7eda455da53e26c4b8a0bf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac686c90f57dbf876a7a87d648ef35700"><td class="memItemLeft" align="right" valign="top">int64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogical__clock.html#ac686c90f57dbf876a7a87d648ef35700">get_timestamp</a> ()</td></tr>
<tr class="separator:ac686c90f57dbf876a7a87d648ef35700"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc18ca694cbab72dbe865485d5632b9c"><td class="memItemLeft" align="right" valign="top"><a id="afc18ca694cbab72dbe865485d5632b9c"></a>
int64&#160;</td><td class="memItemRight" valign="bottom"><b>get_offset</b> ()</td></tr>
<tr class="separator:afc18ca694cbab72dbe865485d5632b9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cf04e43d7f6d5a39fb58c3610408774"><td class="memItemLeft" align="right" valign="top"><a id="a4cf04e43d7f6d5a39fb58c3610408774"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>update_offset</b> (int64 new_offset)</td></tr>
<tr class="separator:a4cf04e43d7f6d5a39fb58c3610408774"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p class="">Logical timestamp generator for logical timestamping binlog transactions. A transaction is associated with two sequence numbers see <code>Transaction_ctx::last_committed</code> and <code>Transaction_ctx::sequence_number</code>. The class provides necessary interfaces including that of generating a next consecutive value for the latter. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="ac686c90f57dbf876a7a87d648ef35700"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac686c90f57dbf876a7a87d648ef35700">&#9670;&nbsp;</a></span>get_timestamp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int64 Logical_clock::get_timestamp </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p class="">Atomically fetch the current state. </p><dl class="section return"><dt>Returns</dt><dd>not subtracted "absolute" value. </dd></dl>

</div>
</div>
<a id="a245c0427e7eda455da53e26c4b8a0bf9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a245c0427e7eda455da53e26c4b8a0bf9">&#9670;&nbsp;</a></span>set_if_greater()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int64 Logical_clock::set_if_greater </td>
          <td>(</td>
          <td class="paramtype">int64&#160;</td>
          <td class="paramname"><em>new_val</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p class="">To try setting the clock <em>forward</em>. The clock does not change when the new value is in the past which is reflected by the new value and by offset. In other words the function main effects is described as state= max(state, new_value). Offset that exceeds the new value indicates the binary log rotation to render such new value useless.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">new_val</td><td>a new value (offset included) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a (new) value of state member regardless whether it's changed or not. </dd></dl>

</div>
</div>
<a id="a1d2e019f74f509ac6244cd4a6e3f1101"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d2e019f74f509ac6244cd4a6e3f1101">&#9670;&nbsp;</a></span>step()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int64 Logical_clock::step </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p class="">Steps the absolute value of the clock (state) to return an updated value. The caller must be sure to call the method in no concurrent execution context so either offset and state can't change.</p>
<dl class="section return"><dt>Returns</dt><dd>incremented "absolute" value </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="rpl__trx__tracking_8h_source.html">rpl_trx_tracking.h</a></li>
<li>rpl_trx_tracking.cc</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
