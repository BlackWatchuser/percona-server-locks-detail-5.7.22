<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: Query Planner</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Query Planner</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gab40ad85a04512dd2ac293b723d96fb54"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Query__Planner.html#gab40ad85a04512dd2ac293b723d96fb54">calculate_condition_filter</a> (const <a class="el" href="classJOIN__TAB.html">JOIN_TAB</a> *const tab, const <a class="el" href="classKey__use.html">Key_use</a> *const keyuse, table_map used_tables, double fanout, bool is_join_buffering)</td></tr>
<tr class="separator:gab40ad85a04512dd2ac293b723d96fb54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga945145266f4a865c166692aea42818ed"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Query__Planner.html#ga945145266f4a865c166692aea42818ed">get_partial_join_cost</a> (<a class="el" href="classJOIN.html">JOIN</a> *join, uint n_tables, double *cost_arg, double *rowcount_arg)</td></tr>
<tr class="separator:ga945145266f4a865c166692aea42818ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf585184987b0097465505d600394b8f3"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Query__Planner.html#gaf585184987b0097465505d600394b8f3">Optimize_table_order::choose_table_order</a> ()</td></tr>
<tr class="separator:gaf585184987b0097465505d600394b8f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a id="gab40ad85a04512dd2ac293b723d96fb54"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab40ad85a04512dd2ac293b723d96fb54">&#9670;&nbsp;</a></span>calculate_condition_filter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float calculate_condition_filter </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJOIN__TAB.html">JOIN_TAB</a> *const&#160;</td>
          <td class="paramname"><em>tab</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classKey__use.html">Key_use</a> *const&#160;</td>
          <td class="paramname"><em>keyuse</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">table_map&#160;</td>
          <td class="paramname"><em>used_tables</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>fanout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_join_buffering</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p class="">Calculate 'Post read filtering' effect of JOIN::conds for table 'tab'. Only conditions that are not directly involved in the chosen access method shall be included in the calculation of this 'Post read filtering' effect.</p>
<p class="">The function first identifies fields that are directly used by the access method. This includes columns used by range and ref access types, and predicates on the identified columns (if any) will not be taken into account when the filtering effect is calculated.</p>
<p class="">The function will then calculate the filtering effect of any predicate that applies to 'tab' and is not depending on the columns used by the access method. The source of information with highest accuracy is always preferred and is as follows: 1) Row estimates from the range optimizer 2) Row estimates from index statistics (records per key) 3) Guesstimates</p>
<p class="">Thus, after identifying columns that are used by the access method, the function will look for rows estimates made by the range optimizer. If found, the estimates from the range optimizer are calculated into the filtering effect.</p>
<p class="">The function then goes through JOIN::conds to get estimates from any remaining predicate that applies to 'tab' and does not depend on any tables that come later in the join sequence. Predicates that depend on columns that are either used by the access method or used in the row estimate from the range optimizer will not be considered in this phase.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tab</td><td>The table condition filtering effect is calculated for </td></tr>
    <tr><td class="paramname">keyuse</td><td>Describes the 'ref' access method (if any) that is chosen </td></tr>
    <tr><td class="paramname">used_tables</td><td>Tables earlier in the join sequence than 'tab' </td></tr>
    <tr><td class="paramname">fanout</td><td>The number of rows read by the chosen access method for each row combination of previous tables </td></tr>
    <tr><td class="paramname">is_join_buffering</td><td>Whether or not condition filtering is about to be calculated for an access method using join buffering. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the 'post read filtering' effect (between 0 and 1) of JOIN::conds </dd></dl>

</div>
</div>
<a id="gaf585184987b0097465505d600394b8f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf585184987b0097465505d600394b8f3">&#9670;&nbsp;</a></span>choose_table_order()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Optimize_table_order::choose_table_order </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p class="">Entry point to table join order optimization. For further description, see class header and private function headers.</p>
<dl class="section return"><dt>Returns</dt><dd>false if successful, true if error</dd></dl>
<p>Selects and invokes a search strategy for an optimal query join order.</p>
<p class="">The function checks user-configurable parameters that control the search strategy for an optimal plan, selects the search method and then invokes it. Each specific optimization procedure stores the final optimal plan in the array 'join-&gt;best_positions', and the cost of the plan in 'join-&gt;best_read'. The function can be invoked to produce a plan for all tables in the query (in this case, the const tables are usually filtered out), or it can be invoked to produce a plan for a materialization of a semijoin nest. Set a non-NULL emb_sjm_nest pointer when producing a plan for a semijoin nest to be materialized and a NULL pointer when producing a full query plan.</p>
<dl class="section return"><dt>Returns</dt><dd>false if successful, true if error </dd></dl>
<p class="">&lt; The tables involved in order selection </p>

</div>
</div>
<a id="ga945145266f4a865c166692aea42818ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga945145266f4a865c166692aea42818ed">&#9670;&nbsp;</a></span>get_partial_join_cost()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void get_partial_join_cost </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classJOIN.html">JOIN</a> *&#160;</td>
          <td class="paramname"><em>join</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint&#160;</td>
          <td class="paramname"><em>n_tables</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>cost_arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>rowcount_arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p class="">Calculate a cost of given partial join order</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">join</td><td>Join to use. ::positions holds the partial join order </td></tr>
    <tr><td class="paramname">n_tables</td><td>Number of tables in the partial join order </td></tr>
    <tr><td class="paramname">cost_arg[out]</td><td>Store read time here </td></tr>
    <tr><td class="paramname">rowcount_arg[out]</td><td>Store record count here</td></tr>
  </table>
  </dd>
</dl>
<p>This is needed for semi-join materialization code. The idea is that we detect sj-materialization after we've put all sj-inner tables into the join prefix</p>
<p class="">prefix-tables semi-join-inner-tables tN ^&ndash;we're here</p>
<p class="">and we'll need to get the cost of prefix-tables prefix again. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
