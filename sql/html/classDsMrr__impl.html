<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: DsMrr_impl Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classDsMrr__impl-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">DsMrr_impl Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a13ef09ad1cf2ce9e5ec540fa97afafa8"><td class="memItemLeft" align="right" valign="top"><a id="a13ef09ad1cf2ce9e5ec540fa97afafa8"></a>
typedef void(handler::*&#160;</td><td class="memItemRight" valign="bottom"><b>range_check_toggle_func_t</b>) (bool on)</td></tr>
<tr class="separator:a13ef09ad1cf2ce9e5ec540fa97afafa8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a63da49f2511507a66241265e90897775"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDsMrr__impl.html#a63da49f2511507a66241265e90897775">init</a> (<a class="el" href="classhandler.html">handler</a> *h_arg, <a class="el" href="structTABLE.html">TABLE</a> *table_arg)</td></tr>
<tr class="separator:a63da49f2511507a66241265e90897775"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade7283d68a19de82fd19ad836ac10506"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDsMrr__impl.html#ade7283d68a19de82fd19ad836ac10506">dsmrr_init</a> (<a class="el" href="classhandler.html">handler</a> *h, <a class="el" href="structst__range__seq__if.html">RANGE_SEQ_IF</a> *seq_funcs, void *seq_init_param, uint n_ranges, uint mode, <a class="el" href="structst__handler__buffer.html">HANDLER_BUFFER</a> *buf)</td></tr>
<tr class="separator:ade7283d68a19de82fd19ad836ac10506"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37d8684f4e71bf4b0b4f064546184417"><td class="memItemLeft" align="right" valign="top"><a id="a37d8684f4e71bf4b0b4f064546184417"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>dsmrr_close</b> ()</td></tr>
<tr class="separator:a37d8684f4e71bf4b0b4f064546184417"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a186174fdee0ea701012e58c55a1e5618"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDsMrr__impl.html#a186174fdee0ea701012e58c55a1e5618">reset</a> ()</td></tr>
<tr class="separator:a186174fdee0ea701012e58c55a1e5618"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a444c0116a9c9b9eefb73195e8ad5c3e6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDsMrr__impl.html#a444c0116a9c9b9eefb73195e8ad5c3e6">dsmrr_fill_buffer</a> ()</td></tr>
<tr class="separator:a444c0116a9c9b9eefb73195e8ad5c3e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcc0a1f4f99e95737581fae0161b2527"><td class="memItemLeft" align="right" valign="top"><a id="afcc0a1f4f99e95737581fae0161b2527"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>dsmrr_next</b> (char **range_info)</td></tr>
<tr class="separator:afcc0a1f4f99e95737581fae0161b2527"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b61662dc18bf171f35e679c4c87eb64"><td class="memItemLeft" align="right" valign="top"><a id="a2b61662dc18bf171f35e679c4c87eb64"></a>
ha_rows&#160;</td><td class="memItemRight" valign="bottom"><b>dsmrr_info</b> (uint keyno, uint n_ranges, uint keys, uint *bufsz, uint *flags, <a class="el" href="classCost__estimate.html">Cost_estimate</a> *cost)</td></tr>
<tr class="separator:a2b61662dc18bf171f35e679c4c87eb64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37a15cc5cafd27df60f13cc3b39c7476"><td class="memItemLeft" align="right" valign="top"><a id="a37a15cc5cafd27df60f13cc3b39c7476"></a>
ha_rows&#160;</td><td class="memItemRight" valign="bottom"><b>dsmrr_info_const</b> (uint keyno, <a class="el" href="structst__range__seq__if.html">RANGE_SEQ_IF</a> *seq, void *seq_init_param, uint n_ranges, uint *bufsz, uint *flags, <a class="el" href="classCost__estimate.html">Cost_estimate</a> *cost)</td></tr>
<tr class="separator:a37a15cc5cafd27df60f13cc3b39c7476"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:ab9e54b21d0894065fe5964c1f9cc88ab"><td class="memItemLeft" align="right" valign="top"><a id="ab9e54b21d0894065fe5964c1f9cc88ab"></a>
<a class="el" href="classhandler.html">handler</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>h</b></td></tr>
<tr class="separator:ab9e54b21d0894065fe5964c1f9cc88ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed8fc84364868b01cb0d19537d5fa5b3"><td class="memItemLeft" align="right" valign="top"><a id="aed8fc84364868b01cb0d19537d5fa5b3"></a>
<a class="el" href="structTABLE.html">TABLE</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>table</b></td></tr>
<tr class="separator:aed8fc84364868b01cb0d19537d5fa5b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a444c0116a9c9b9eefb73195e8ad5c3e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a444c0116a9c9b9eefb73195e8ad5c3e6">&#9670;&nbsp;</a></span>dsmrr_fill_buffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int DsMrr_impl::dsmrr_fill_buffer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p class="">DS-MRR: Fill the buffer with rowids and sort it by rowid</p>
<p class="">{This is an internal function of DiskSweep MRR implementation} Scan the MRR ranges and collect ROWIDs (or {ROWID, range_id} pairs) into buffer. When the buffer is full or scan is completed, sort the buffer by rowid and return.</p>
<p class="">The function assumes that rowids buffer is empty when it is invoked.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">h</td><td>Table handler</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>OK, the next portion of rowids is in the buffer, properly ordered </td></tr>
    <tr><td class="paramname">other</td><td>Error </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ade7283d68a19de82fd19ad836ac10506"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade7283d68a19de82fd19ad836ac10506">&#9670;&nbsp;</a></span>dsmrr_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int DsMrr_impl::dsmrr_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classhandler.html">handler</a> *&#160;</td>
          <td class="paramname"><em>h_arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structst__range__seq__if.html">RANGE_SEQ_IF</a> *&#160;</td>
          <td class="paramname"><em>seq_funcs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>seq_init_param</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint&#160;</td>
          <td class="paramname"><em>n_ranges</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structst__handler__buffer.html">HANDLER_BUFFER</a> *&#160;</td>
          <td class="paramname"><em>buf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p class="">DS-MRR: Initialize and start MRR scan</p>
<p class="">Initialize and start the MRR scan. Depending on the mode parameter, this may use default or DS-MRR implementation.</p>
<p class="">The DS-MRR implementation will use a second handler object (h2) for doing scan on the index:</p><ul>
<li>on the first call to this function the h2 handler will be created and h2 will be opened using the same index as the main handler is set to use. The index scan on the main index will be closed and it will be re-opened to read records from the table using either no key or the primary key. The h2 handler will be deleted when <a class="el" href="classDsMrr__impl.html#a186174fdee0ea701012e58c55a1e5618">reset()</a> is called (which should happen on the end of the statement).</li>
<li>when dsmrr_close() is called the index scan on h2 is closed.</li>
<li>on following calls to this function one of the following must be valid: a. if dsmrr_close has been called: the main handler (h) must be open on an index, h2 will be opened using this index, and the index on h will be closed and h will be re-opened to read reads from the table using either no key or the primary key. b. dsmrr_close has not been called: h2 will already be open, the main handler h must be set up to read records from the table (handler-&gt;inited is RND) either using the primary index or using no index at all.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">h_arg</td><td>Table handler to be used </td></tr>
    <tr><td class="paramname">seq_funcs</td><td><a class="el" href="structInterval.html">Interval</a> sequence enumeration functions </td></tr>
    <tr><td class="paramname">seq_init_param</td><td><a class="el" href="structInterval.html">Interval</a> sequence enumeration parameter </td></tr>
    <tr><td class="paramname">n_ranges</td><td>Number of ranges in the sequence. </td></tr>
    <tr><td class="paramname">mode</td><td>HA_MRR_* modes to use </td></tr>
    <tr><td class="paramname">buf</td><td>INOUT Buffer to use</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Ok, Scan started. </td></tr>
    <tr><td class="paramname">other</td><td>Error </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a63da49f2511507a66241265e90897775"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63da49f2511507a66241265e90897775">&#9670;&nbsp;</a></span>init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void DsMrr_impl::init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classhandler.html">handler</a> *&#160;</td>
          <td class="paramname"><em>h_arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structTABLE.html">TABLE</a> *&#160;</td>
          <td class="paramname"><em>table_arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p class="">Initialize the <a class="el" href="classDsMrr__impl.html">DsMrr_impl</a> object.</p>
<p class="">This object is used for both doing default MRR scans and DS-MRR scans. This function just initializes the object. To do a DS-MRR scan, this must also be initialized by calling <a class="el" href="classDsMrr__impl.html#ade7283d68a19de82fd19ad836ac10506">dsmrr_init()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">h_arg</td><td>pointer to the handler that owns this object </td></tr>
    <tr><td class="paramname">table_arg</td><td>pointer to the <a class="el" href="structTABLE.html">TABLE</a> that owns the handler </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a186174fdee0ea701012e58c55a1e5618"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a186174fdee0ea701012e58c55a1e5618">&#9670;&nbsp;</a></span>reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DsMrr_impl::reset </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p class="">Resets the DS-MRR object to the state it had after being intialized.</p>
<p class="">If there is an open scan then this will be closed.</p>
<p class="">This function should be called by <a class="el" href="classhandler.html#a53d38f167906d8aaa9e560c71e595a42" title="Check handler usage and reset state of file to after &#39;open&#39;.">handler::ha_reset()</a> which is called when a statement is completed in order to make the handler object ready for re-use by a different statement. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="handler_8h_source.html">handler.h</a></li>
<li><a class="el" href="handler_8cc.html">handler.cc</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
