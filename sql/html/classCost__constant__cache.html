<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: Cost_constant_cache Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classCost__constant__cache-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Cost_constant_cache Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="opt__costconstantcache_8h_source.html">opt_costconstantcache.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aa428329188f6a76a121615419d4ef73f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCost__constant__cache.html#aa428329188f6a76a121615419d4ef73f">Cost_constant_cache</a> ()</td></tr>
<tr class="separator:aa428329188f6a76a121615419d4ef73f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31b347d1012ee2fa400fecd7a2819b2b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCost__constant__cache.html#a31b347d1012ee2fa400fecd7a2819b2b">~Cost_constant_cache</a> ()</td></tr>
<tr class="separator:a31b347d1012ee2fa400fecd7a2819b2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27341cb9a16b958f01fc394f3c1c8118"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCost__constant__cache.html#a27341cb9a16b958f01fc394f3c1c8118">init</a> ()</td></tr>
<tr class="separator:a27341cb9a16b958f01fc394f3c1c8118"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9606f8ca892056e98dd852f24994ee70"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCost__constant__cache.html#a9606f8ca892056e98dd852f24994ee70">close</a> ()</td></tr>
<tr class="separator:a9606f8ca892056e98dd852f24994ee70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44df0f5b25e6e62b9df8d15451616921"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCost__constant__cache.html#a44df0f5b25e6e62b9df8d15451616921">reload</a> ()</td></tr>
<tr class="separator:a44df0f5b25e6e62b9df8d15451616921"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade6946bec347063cbf5ad09cafbb97a0"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classCost__model__constants.html">Cost_model_constants</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCost__constant__cache.html#ade6946bec347063cbf5ad09cafbb97a0">get_cost_constants</a> ()</td></tr>
<tr class="separator:ade6946bec347063cbf5ad09cafbb97a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f8a07c3d8481469e7aebadd3b11298f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCost__constant__cache.html#a9f8a07c3d8481469e7aebadd3b11298f">release_cost_constants</a> (const <a class="el" href="classCost__model__constants.html">Cost_model_constants</a> *cost_constants)</td></tr>
<tr class="separator:a9f8a07c3d8481469e7aebadd3b11298f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p class="">This class implements a cache for "cost constant sets". This cache is responsible for creating the set of cost constant, giving new sessions access to the latest versions of the cost constants, and for re-reading the cost constant tables in the case where these have been updated.</p>
<p class="">The cost constant cache keeps a copy of the current set of cost constants. Each time a new session initializes its <a class="el" href="classCost__model__server.html">Cost_model_server</a> object (by calling <a class="el" href="classCost__model__server.html#a267c97e430cec8665c0c62ad722d80c1">Cost_model_server::init()</a> in lex_start()), the <a class="el" href="classCost__model__server.html">Cost_model_server</a> object will request the cost constant cache to give it the current version of the cost constants. This is done by calling <a class="el" href="classCost__constant__cache.html#ade6946bec347063cbf5ad09cafbb97a0">Cost_constant_cache::get_cost_constants()</a>. This function will just return a pointer to the current set of cost constants. As time goes, new cost constant sets might be created and added to the cost constant cache. In order to know when a cost constant set can be deleted, reference counting is used. Each time a session asks for the cost constants, the reference counter is incremented. When the session releases the cost constant set by calling ::release_cost_constants(), the reference counter will be decremented. When the reference counter becomes zero, the cost constant set is deleted. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aa428329188f6a76a121615419d4ef73f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa428329188f6a76a121615419d4ef73f">&#9670;&nbsp;</a></span>Cost_constant_cache()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Cost_constant_cache::Cost_constant_cache </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p class="">Creates an empty cost constant cache. To initialize it with default cost constants, ::init() must be called. To use cost constants from the cost constant tables, ::reload() must be called.</p>
<p class="">Minimal initialization of the object. The main initialization is done by calling <a class="el" href="classCost__constant__cache.html#a27341cb9a16b958f01fc394f3c1c8118">init()</a>. </p>

</div>
</div>
<a id="a31b347d1012ee2fa400fecd7a2819b2b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31b347d1012ee2fa400fecd7a2819b2b">&#9670;&nbsp;</a></span>~Cost_constant_cache()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Cost_constant_cache::~Cost_constant_cache </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p class="">Destructor for the cost constant cache. Before the cost constant cache is deleted, ::close() must have been called. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a9606f8ca892056e98dd852f24994ee70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9606f8ca892056e98dd852f24994ee70">&#9670;&nbsp;</a></span>close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Cost_constant_cache::close </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p class="">Close the cost constant cache.</p>
<p class="">All resources owned by the cost constant cache are released. </p>

</div>
</div>
<a id="ade6946bec347063cbf5ad09cafbb97a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade6946bec347063cbf5ad09cafbb97a0">&#9670;&nbsp;</a></span>get_cost_constants()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classCost__model__constants.html">Cost_model_constants</a>* Cost_constant_cache::get_cost_constants </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p class="">Get the currently used set of cost constants.</p>
<p class="">This function will just return a pointer to a shared version of the cost constants. For tracking of how many sessions that is using the set and to be able to know when it is safe to delete the cost constant object, reference counting is used. This function will increase the ref count for the returned cost constant object. To decrease the reference counter when the cost constants are no longer used, <a class="el" href="classCost__constant__cache.html#a9f8a07c3d8481469e7aebadd3b11298f">release_cost_constants()</a> must be called.</p>
<dl class="section note"><dt>Note</dt><dd>To ensure that the reference counter is only incremented once for each session that uses the cost constant set, this function should only be called once per session.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>pointer to the cost constants </dd></dl>

</div>
</div>
<a id="a27341cb9a16b958f01fc394f3c1c8118"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27341cb9a16b958f01fc394f3c1c8118">&#9670;&nbsp;</a></span>init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Cost_constant_cache::init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p class="">Initialize the cost module.</p>
<p class="">The cost constants will be initialized with the default values found in the source code. To start using the cost constant values found in the configuration tables, the ::reload() function must be called. </p>

</div>
</div>
<a id="a9f8a07c3d8481469e7aebadd3b11298f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f8a07c3d8481469e7aebadd3b11298f">&#9670;&nbsp;</a></span>release_cost_constants()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Cost_constant_cache::release_cost_constants </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCost__model__constants.html">Cost_model_constants</a> *&#160;</td>
          <td class="paramname"><em>cost_constants</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p class="">Releases the cost constant set.</p>
<p class="">This will decrement the reference counter on the cost constant set and if nobody is using it, it will be deleted. This function should be called each time a client (a session) no longer has any use for a cost constant set that it has previously gotten from calling ::get_cost_constants()</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cost_constants</td><td>pointer to the cost constant set </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a44df0f5b25e6e62b9df8d15451616921"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44df0f5b25e6e62b9df8d15451616921">&#9670;&nbsp;</a></span>reload()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Cost_constant_cache::reload </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p class="">Reload all cost constants from the configuration tables. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="opt__costconstantcache_8h_source.html">opt_costconstantcache.h</a></li>
<li>opt_costconstantcache.cc</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
