\hypertarget{classItem__row}{}\section{Item\+\_\+row Class Reference}
\label{classItem__row}\index{Item\+\_\+row@{Item\+\_\+row}}


{\ttfamily \#include $<$item\+\_\+row.\+h$>$}

Inheritance diagram for Item\+\_\+row\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{classItem__row}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classItem__row_a8f0ccfbe35ebded8e8a9b3ba13ff9db3}{Item\+\_\+row}} (const \mbox{\hyperlink{structYYLTYPE}{P\+OS}} \&pos, \mbox{\hyperlink{classItem}{Item}} $\ast$head, \mbox{\hyperlink{classList}{List}}$<$ \mbox{\hyperlink{classItem}{Item}} $>$ \&tail)
\item 
\mbox{\Hypertarget{classItem__row_a7f7782f117cbe1767549663d951ae94a}\label{classItem__row_a7f7782f117cbe1767549663d951ae94a}} 
{\bfseries Item\+\_\+row} (\mbox{\hyperlink{classItem}{Item}} $\ast$head, \mbox{\hyperlink{classList}{List}}$<$ \mbox{\hyperlink{classItem}{Item}} $>$ \&tail)
\item 
\mbox{\Hypertarget{classItem__row_a68020803658e2ee8ec47b8266853bb11}\label{classItem__row_a68020803658e2ee8ec47b8266853bb11}} 
{\bfseries Item\+\_\+row} (\mbox{\hyperlink{classItem__row}{Item\+\_\+row}} $\ast$item)
\item 
virtual bool \mbox{\hyperlink{classItem__row_af0e050bb8e5b8942ac7d27da01ab897b}{itemize}} (\mbox{\hyperlink{structParse__context}{Parse\+\_\+context}} $\ast$pc, \mbox{\hyperlink{classItem}{Item}} $\ast$$\ast$res)
\item 
\mbox{\Hypertarget{classItem__row_aec0eb1b46b1da34a19b7ca12ad62aff2}\label{classItem__row_aec0eb1b46b1da34a19b7ca12ad62aff2}} 
enum Type {\bfseries type} () const
\item 
\mbox{\Hypertarget{classItem__row_a049c3998fd5ea2854e842e4a8886a4af}\label{classItem__row_a049c3998fd5ea2854e842e4a8886a4af}} 
void {\bfseries illegal\+\_\+method\+\_\+call} (const char $\ast$)
\item 
\mbox{\Hypertarget{classItem__row_ab233212fc0b75dac275524a1c8c04e4a}\label{classItem__row_ab233212fc0b75dac275524a1c8c04e4a}} 
bool {\bfseries is\+\_\+null} ()
\item 
\mbox{\Hypertarget{classItem__row_abed64203c45211a339ef601a7b6b03e7}\label{classItem__row_abed64203c45211a339ef601a7b6b03e7}} 
void {\bfseries make\+\_\+field} (\mbox{\hyperlink{classSend__field}{Send\+\_\+field}} $\ast$)
\item 
\mbox{\Hypertarget{classItem__row_a80e60b0d95fe5b6bf447695c0e0e9b82}\label{classItem__row_a80e60b0d95fe5b6bf447695c0e0e9b82}} 
double {\bfseries val\+\_\+real} ()
\item 
\mbox{\Hypertarget{classItem__row_aa200d33200338bebc453a98e20bc2ed7}\label{classItem__row_aa200d33200338bebc453a98e20bc2ed7}} 
longlong {\bfseries val\+\_\+int} ()
\item 
\mbox{\Hypertarget{classItem__row_ab26ff215589f7ed621d217832597329b}\label{classItem__row_ab26ff215589f7ed621d217832597329b}} 
String $\ast$ {\bfseries val\+\_\+str} (String $\ast$)
\item 
\mbox{\Hypertarget{classItem__row_ad44826c651d5f76e362ef2ab84333ecd}\label{classItem__row_ad44826c651d5f76e362ef2ab84333ecd}} 
\mbox{\hyperlink{classmy__decimal}{my\+\_\+decimal}} $\ast$ {\bfseries val\+\_\+decimal} (\mbox{\hyperlink{classmy__decimal}{my\+\_\+decimal}} $\ast$)
\item 
\mbox{\Hypertarget{classItem__row_a484bd7f182c2861312abeb994b8848b1}\label{classItem__row_a484bd7f182c2861312abeb994b8848b1}} 
bool {\bfseries get\+\_\+date} (M\+Y\+S\+Q\+L\+\_\+\+T\+I\+ME $\ast$ltime, my\+\_\+time\+\_\+flags\+\_\+t fuzzydate)
\item 
\mbox{\Hypertarget{classItem__row_aa8d0c791e5a1875b25409771197e64e6}\label{classItem__row_aa8d0c791e5a1875b25409771197e64e6}} 
bool {\bfseries get\+\_\+time} (M\+Y\+S\+Q\+L\+\_\+\+T\+I\+ME $\ast$ltime)
\item 
\mbox{\Hypertarget{classItem__row_a4e6aaee9931e3ee5cb1fdc8a02f283cb}\label{classItem__row_a4e6aaee9931e3ee5cb1fdc8a02f283cb}} 
bool {\bfseries fix\+\_\+fields} (T\+HD $\ast$thd, \mbox{\hyperlink{classItem}{Item}} $\ast$$\ast$ref)
\item 
void \mbox{\hyperlink{classItem__row_a2da513a82afd5830483e351dbc9c2dad}{fix\+\_\+after\+\_\+pullout}} (st\+\_\+select\+\_\+lex $\ast$parent\+\_\+select, st\+\_\+select\+\_\+lex $\ast$removed\+\_\+select)
\item 
\mbox{\Hypertarget{classItem__row_a8e1687abf9472c3a8770b24c0df34415}\label{classItem__row_a8e1687abf9472c3a8770b24c0df34415}} 
void {\bfseries cleanup} ()
\item 
\mbox{\Hypertarget{classItem__row_a153a9f45614653a5b8f591c0c02f84e0}\label{classItem__row_a153a9f45614653a5b8f591c0c02f84e0}} 
void {\bfseries split\+\_\+sum\+\_\+func} (T\+HD $\ast$thd, \mbox{\hyperlink{classBounds__checked__array}{Ref\+\_\+ptr\+\_\+array}} ref\+\_\+pointer\+\_\+array, \mbox{\hyperlink{classList}{List}}$<$ \mbox{\hyperlink{classItem}{Item}} $>$ \&fields)
\item 
\mbox{\Hypertarget{classItem__row_a80ea89cadeb1a7d6694b4383c6ed47a5}\label{classItem__row_a80ea89cadeb1a7d6694b4383c6ed47a5}} 
table\+\_\+map {\bfseries used\+\_\+tables} () const
\item 
\mbox{\Hypertarget{classItem__row_ab44e088761c4650f28350f90d8190b1c}\label{classItem__row_ab44e088761c4650f28350f90d8190b1c}} 
bool {\bfseries const\+\_\+item} () const
\item 
\mbox{\Hypertarget{classItem__row_a1d0b86aa24ebeb490fee49f5119ac719}\label{classItem__row_a1d0b86aa24ebeb490fee49f5119ac719}} 
enum Item\+\_\+result {\bfseries result\+\_\+type} () const
\item 
\mbox{\Hypertarget{classItem__row_aa8df148df1f2f27a0c643a133407f7ca}\label{classItem__row_aa8df148df1f2f27a0c643a133407f7ca}} 
void {\bfseries update\+\_\+used\+\_\+tables} ()
\item 
\mbox{\Hypertarget{classItem__row_aa6556e2c79220e51a2bc88925d38aa84}\label{classItem__row_aa6556e2c79220e51a2bc88925d38aa84}} 
table\+\_\+map {\bfseries not\+\_\+null\+\_\+tables} () const
\item 
virtual void \mbox{\hyperlink{classItem__row_a9392533818e1f941a356ba46ba5c001c}{print}} (String $\ast$str, enum\+\_\+query\+\_\+type query\+\_\+type)
\item 
bool \mbox{\hyperlink{classItem__row_a7866a24ed779c242c6841735e7de6c04}{walk}} (Item\+\_\+processor processor, \mbox{\hyperlink{classItem_a4e68f315ba2a26543339e9f0efed3695}{enum\+\_\+walk}} walk, uchar $\ast$arg)
\item 
\mbox{\hyperlink{classItem}{Item}} $\ast$ \mbox{\hyperlink{classItem__row_a708898ec64fe61e228a0f345d1657afb}{transform}} (Item\+\_\+transformer transformer, uchar $\ast$arg)
\item 
\mbox{\Hypertarget{classItem__row_a5dafd91cc8ba254513a40e8103f0838c}\label{classItem__row_a5dafd91cc8ba254513a40e8103f0838c}} 
uint {\bfseries cols} ()
\item 
\mbox{\Hypertarget{classItem__row_ab24b50e5f5bbadb0ac3f8d7d788fc55a}\label{classItem__row_ab24b50e5f5bbadb0ac3f8d7d788fc55a}} 
\mbox{\hyperlink{classItem}{Item}} $\ast$ {\bfseries element\+\_\+index} (uint i)
\item 
\mbox{\Hypertarget{classItem__row_a701f84d217c0408cea36e8b61c5b056d}\label{classItem__row_a701f84d217c0408cea36e8b61c5b056d}} 
\mbox{\hyperlink{classItem}{Item}} $\ast$$\ast$ {\bfseries addr} (uint i)
\item 
\mbox{\Hypertarget{classItem__row_a1c94925f96d10c92f5f2754e68dc068d}\label{classItem__row_a1c94925f96d10c92f5f2754e68dc068d}} 
bool {\bfseries check\+\_\+cols} (uint c)
\item 
\mbox{\Hypertarget{classItem__row_a0a29d92f66833e04cc4fb65ab8ec0f9c}\label{classItem__row_a0a29d92f66833e04cc4fb65ab8ec0f9c}} 
bool {\bfseries null\+\_\+inside} ()
\item 
\mbox{\Hypertarget{classItem__row_ada49422265b95e8ff5ad81bcf88382ec}\label{classItem__row_ada49422265b95e8ff5ad81bcf88382ec}} 
void {\bfseries bring\+\_\+value} ()
\item 
bool \mbox{\hyperlink{classItem__row_abaff5b82ee17b24e4a5d24a3c71b29b4}{check\+\_\+gcol\+\_\+func\+\_\+processor}} (uchar $\ast$int\+\_\+arg)
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
\mbox{\hyperlink{classItem}{Item}} which stores (x,y,...) and R\+O\+W(x,y,...). Note that this can be recursive\+: ((x,y),(z,t)) is a R\+OW of R\+O\+Ws. 

\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classItem__row_a8f0ccfbe35ebded8e8a9b3ba13ff9db3}\label{classItem__row_a8f0ccfbe35ebded8e8a9b3ba13ff9db3}} 
\index{Item\+\_\+row@{Item\+\_\+row}!Item\+\_\+row@{Item\+\_\+row}}
\index{Item\+\_\+row@{Item\+\_\+row}!Item\+\_\+row@{Item\+\_\+row}}
\subsubsection{\texorpdfstring{Item\+\_\+row()}{Item\_row()}}
{\footnotesize\ttfamily Item\+\_\+row\+::\+Item\+\_\+row (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structYYLTYPE}{P\+OS}} \&}]{pos,  }\item[{\mbox{\hyperlink{classItem}{Item}} $\ast$}]{head,  }\item[{\mbox{\hyperlink{classList}{List}}$<$ \mbox{\hyperlink{classItem}{Item}} $>$ \&}]{tail }\end{DoxyParamCaption})}

Row items used for comparing rows and IN operations on rows\+:


\begin{DoxyParams}{Parameters}
{\em pos} & current parse context \\
\hline
{\em head} & first column in the row \\
\hline
{\em tail} & rest of columns in the row\\
\hline
\end{DoxyParams}
\begin{DoxyVerb}(a, b, c) > (10, 10, 30)
(a, b, c) = (select c, d, e, from t1 where x=12)
(a, b, c) IN ((1,2,2), (3,4,5), (6,7,8)
(a, b, c) IN (select c, d, e, from t1)
\end{DoxyVerb}


\begin{DoxyRefDesc}{Todo}
\item[\mbox{\hyperlink{todo__todo000033}{Todo}}]think placing 2-\/3 component items in item (as it done for function \end{DoxyRefDesc}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classItem__row_abaff5b82ee17b24e4a5d24a3c71b29b4}\label{classItem__row_abaff5b82ee17b24e4a5d24a3c71b29b4}} 
\index{Item\+\_\+row@{Item\+\_\+row}!check\+\_\+gcol\+\_\+func\+\_\+processor@{check\+\_\+gcol\+\_\+func\+\_\+processor}}
\index{check\+\_\+gcol\+\_\+func\+\_\+processor@{check\+\_\+gcol\+\_\+func\+\_\+processor}!Item\+\_\+row@{Item\+\_\+row}}
\subsubsection{\texorpdfstring{check\+\_\+gcol\+\_\+func\+\_\+processor()}{check\_gcol\_func\_processor()}}
{\footnotesize\ttfamily bool Item\+\_\+row\+::check\+\_\+gcol\+\_\+func\+\_\+processor (\begin{DoxyParamCaption}\item[{uchar $\ast$}]{int\+\_\+arg }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}

Check if an expression/function is allowed for a virtual column


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in,out}}  & {\em int\+\_\+arg} & An array of two integers. Used only for \mbox{\hyperlink{classItem__field}{Item\+\_\+field}}. The first cell passes the field\textquotesingle{}s number in the table. The second cell is an out parameter containing the error code.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true if function is not accepted 
\end{DoxyReturn}


Reimplemented from \mbox{\hyperlink{classItem_af75e3659f732265cbe72824803f208f2}{Item}}.

\mbox{\Hypertarget{classItem__row_a2da513a82afd5830483e351dbc9c2dad}\label{classItem__row_a2da513a82afd5830483e351dbc9c2dad}} 
\index{Item\+\_\+row@{Item\+\_\+row}!fix\+\_\+after\+\_\+pullout@{fix\+\_\+after\+\_\+pullout}}
\index{fix\+\_\+after\+\_\+pullout@{fix\+\_\+after\+\_\+pullout}!Item\+\_\+row@{Item\+\_\+row}}
\subsubsection{\texorpdfstring{fix\+\_\+after\+\_\+pullout()}{fix\_after\_pullout()}}
{\footnotesize\ttfamily void Item\+\_\+row\+::fix\+\_\+after\+\_\+pullout (\begin{DoxyParamCaption}\item[{st\+\_\+select\+\_\+lex $\ast$}]{parent\+\_\+select,  }\item[{st\+\_\+select\+\_\+lex $\ast$}]{removed\+\_\+select }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}

Fix after tables have been moved from one select\+\_\+lex level to the parent level, e.\+g by semijoin conversion. Basically re-\/calculate all attributes dependent on the tables.


\begin{DoxyParams}{Parameters}
{\em parent\+\_\+select} & select\+\_\+lex that tables are moved to. \\
\hline
{\em removed\+\_\+select} & select\+\_\+lex that tables are moved away from, child of parent\+\_\+select. \\
\hline
\end{DoxyParams}


Reimplemented from \mbox{\hyperlink{classItem_a6e3c38497d210357a4f80a755fb7b61e}{Item}}.

\mbox{\Hypertarget{classItem__row_af0e050bb8e5b8942ac7d27da01ab897b}\label{classItem__row_af0e050bb8e5b8942ac7d27da01ab897b}} 
\index{Item\+\_\+row@{Item\+\_\+row}!itemize@{itemize}}
\index{itemize@{itemize}!Item\+\_\+row@{Item\+\_\+row}}
\subsubsection{\texorpdfstring{itemize()}{itemize()}}
{\footnotesize\ttfamily bool Item\+\_\+row\+::itemize (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structParse__context}{Parse\+\_\+context}} $\ast$}]{pc,  }\item[{\mbox{\hyperlink{classItem}{Item}} $\ast$$\ast$}]{res }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}

The same as contextualize()/contextualize\+\_\+() but with additional parameter

This function finalize the construction of \mbox{\hyperlink{classItem}{Item}} objects (see the \mbox{\hyperlink{classItem}{Item(\+P\+O\+S)}} constructor)\+: we can access/change parser contexts from the \mbox{\hyperlink{classItem__row_af0e050bb8e5b8942ac7d27da01ab897b}{itemize()}} function.


\begin{DoxyParams}[1]{Parameters}
 & {\em pc} & current parse context \\
\hline
\mbox{\texttt{ out}}  & {\em res} & pointer to \char`\"{}this\char`\"{} or to a newly allocated replacement object to use in the \mbox{\hyperlink{classItem}{Item}} tree instead\\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em false} & success \\
\hline
{\em true} & syntax/\+O\+O\+M/etc error \\
\hline
\end{DoxyRetVals}


Reimplemented from \mbox{\hyperlink{classItem_a0757839d09aa77bfd92bfe071f257ae9}{Item}}.

\mbox{\Hypertarget{classItem__row_a9392533818e1f941a356ba46ba5c001c}\label{classItem__row_a9392533818e1f941a356ba46ba5c001c}} 
\index{Item\+\_\+row@{Item\+\_\+row}!print@{print}}
\index{print@{print}!Item\+\_\+row@{Item\+\_\+row}}
\subsubsection{\texorpdfstring{print()}{print()}}
{\footnotesize\ttfamily void Item\+\_\+row\+::print (\begin{DoxyParamCaption}\item[{String $\ast$}]{str,  }\item[{enum\+\_\+query\+\_\+type}]{query\+\_\+type }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}

This method is used for to\+:
\begin{DoxyItemize}
\item to generate a view definition query (S\+E\+L\+E\+CT-\/statement);
\item to generate a S\+QL-\/query for E\+X\+P\+L\+A\+IN E\+X\+T\+E\+N\+D\+ED;
\item to generate a S\+QL-\/query to be shown in I\+N\+F\+O\+R\+M\+A\+T\+I\+O\+N\+\_\+\+S\+C\+H\+E\+MA;
\item to generate a S\+QL-\/query that looks like a prepared statement for query\+\_\+rewrite
\item debug.
\end{DoxyItemize}

For more information about view definition query, I\+N\+F\+O\+R\+M\+A\+T\+I\+O\+N\+\_\+\+S\+C\+H\+E\+MA query and why they should be generated from the \mbox{\hyperlink{classItem}{Item}}-\/tree, \begin{DoxySeeAlso}{See also}
mysql\+\_\+register\+\_\+view(). 
\end{DoxySeeAlso}


Reimplemented from \mbox{\hyperlink{classItem_aa7ba4bde739d83adec8edf3bf1596d94}{Item}}.

\mbox{\Hypertarget{classItem__row_a708898ec64fe61e228a0f345d1657afb}\label{classItem__row_a708898ec64fe61e228a0f345d1657afb}} 
\index{Item\+\_\+row@{Item\+\_\+row}!transform@{transform}}
\index{transform@{transform}!Item\+\_\+row@{Item\+\_\+row}}
\subsubsection{\texorpdfstring{transform()}{transform()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classItem}{Item}} $\ast$ Item\+\_\+row\+::transform (\begin{DoxyParamCaption}\item[{Item\+\_\+transformer}]{transformer,  }\item[{uchar $\ast$}]{arg }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}

Traverse item tree possibly transforming it (replacing items).

This function is designed to ease transformation of \mbox{\hyperlink{classItem}{Item}} trees. Re-\/execution note\+: every such transformation is registered for rollback by T\+H\+D\+::change\+\_\+item\+\_\+tree() and is rolled back at the end of execution by T\+H\+D\+::rollback\+\_\+item\+\_\+tree\+\_\+changes().

Therefore\+:
\begin{DoxyItemize}
\item this function can not be used at prepared statement prepare (in particular, in fix\+\_\+fields!), as only permanent transformation of \mbox{\hyperlink{classItem}{Item}} trees are allowed at prepare.
\item the transformer function shall allocate new Items in execution memory root (thd-\/$>$mem\+\_\+root) and not anywhere else\+: allocated items will be gone in the end of execution.
\end{DoxyItemize}

If you don\textquotesingle{}t need to transform an item tree, but only traverse it, please use \mbox{\hyperlink{classItem_ab7d2529511c14a77e59a1b1bbabc95d7}{Item\+::walk()}} instead.


\begin{DoxyParams}{Parameters}
{\em transformer} & functor that performs transformation of a subtree \\
\hline
{\em arg} & opaque argument passed to the functor\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Returns pointer to the new subtree root. T\+H\+D\+::change\+\_\+item\+\_\+tree() should be called for it if transformation took place, i.\+e. if a pointer to newly allocated item is returned. 
\end{DoxyReturn}


Reimplemented from \mbox{\hyperlink{classItem_ae4459c9d19c2c656c63da3bbd32760e5}{Item}}.

\mbox{\Hypertarget{classItem__row_a7866a24ed779c242c6841735e7de6c04}\label{classItem__row_a7866a24ed779c242c6841735e7de6c04}} 
\index{Item\+\_\+row@{Item\+\_\+row}!walk@{walk}}
\index{walk@{walk}!Item\+\_\+row@{Item\+\_\+row}}
\subsubsection{\texorpdfstring{walk()}{walk()}}
{\footnotesize\ttfamily bool Item\+\_\+row\+::walk (\begin{DoxyParamCaption}\item[{Item\+\_\+processor}]{processor,  }\item[{\mbox{\hyperlink{classItem_a4e68f315ba2a26543339e9f0efed3695}{enum\+\_\+walk}}}]{walk,  }\item[{uchar $\ast$}]{arg }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}

Traverses a tree of Items in prefix and/or postfix order. Optionally walks into subqueries.


\begin{DoxyParams}{Parameters}
{\em processor} & processor function to be invoked per item returns true to abort traversal, false to continue \\
\hline
{\em walk} & controls how to traverse the item tree W\+A\+L\+K\+\_\+\+P\+R\+E\+F\+IX\+: call processor before invoking children W\+A\+L\+K\+\_\+\+P\+O\+S\+T\+F\+IX\+: call processor after invoking children W\+A\+L\+K\+\_\+\+S\+U\+B\+Q\+U\+E\+RY go down into subqueries walk values are bit-\/coded and may be combined. Omitting both W\+A\+L\+K\+\_\+\+P\+R\+E\+F\+IX and W\+A\+L\+K\+\_\+\+P\+O\+S\+T\+F\+IX is undefined behaviour. \\
\hline
{\em arg} & Optional pointer to a walk-\/specific object\\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em false} & walk succeeded \\
\hline
{\em true} & walk aborted by agreement, an error may have been reported \\
\hline
\end{DoxyRetVals}


Reimplemented from \mbox{\hyperlink{classItem_ab7d2529511c14a77e59a1b1bbabc95d7}{Item}}.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
item\+\_\+row.\+h\item 
item\+\_\+row.\+cc\end{DoxyCompactItemize}
