\hypertarget{classItem__in__subselect}{}\section{Item\+\_\+in\+\_\+subselect Class Reference}
\label{classItem__in__subselect}\index{Item\+\_\+in\+\_\+subselect@{Item\+\_\+in\+\_\+subselect}}


{\ttfamily \#include $<$item\+\_\+subselect.\+h$>$}

Inheritance diagram for Item\+\_\+in\+\_\+subselect\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=7.000000cm]{classItem__in__subselect}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classItem__in__subselect_abbe21b054fcbc8b52a917e9a5736f80f}\label{classItem__in__subselect_abbe21b054fcbc8b52a917e9a5736f80f}} 
bool {\bfseries in2exists\+\_\+added\+\_\+to\+\_\+where} () const
\item 
\mbox{\Hypertarget{classItem__in__subselect_a5b336b01f40b739cf5b6fb4859093d3e}\label{classItem__in__subselect_a5b336b01f40b739cf5b6fb4859093d3e}} 
bool \mbox{\hyperlink{classItem__in__subselect_a5b336b01f40b739cf5b6fb4859093d3e}{dependent\+\_\+before\+\_\+in2exists}} () const
\begin{DoxyCompactList}\small\item\em Is reliable only if IN-\/$>$E\+X\+I\+S\+TS has been done. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classItem__in__subselect_a6efad3c1710eab02c31397002e0b49d0}\label{classItem__in__subselect_a6efad3c1710eab02c31397002e0b49d0}} 
bool $\ast$ {\bfseries get\+\_\+cond\+\_\+guard} (int i)
\item 
\mbox{\Hypertarget{classItem__in__subselect_a35f363b8f4d103a5abf34237ee534d0f}\label{classItem__in__subselect_a35f363b8f4d103a5abf34237ee534d0f}} 
void {\bfseries set\+\_\+cond\+\_\+guard\+\_\+var} (int i, bool v)
\item 
\mbox{\Hypertarget{classItem__in__subselect_aaff0387de68fabb81c120b07cc02d0a0}\label{classItem__in__subselect_aaff0387de68fabb81c120b07cc02d0a0}} 
bool {\bfseries have\+\_\+guarded\+\_\+conds} ()
\item 
\mbox{\Hypertarget{classItem__in__subselect_a54b7a641603bba8b6e4f09658f4eab58}\label{classItem__in__subselect_a54b7a641603bba8b6e4f09658f4eab58}} 
{\bfseries Item\+\_\+in\+\_\+subselect} (\mbox{\hyperlink{classItem}{Item}} $\ast$left\+\_\+expr, S\+E\+L\+E\+C\+T\+\_\+\+L\+EX $\ast$select\+\_\+lex)
\item 
\mbox{\Hypertarget{classItem__in__subselect_a68ad0963debb694d921f66a6cd3d95cc}\label{classItem__in__subselect_a68ad0963debb694d921f66a6cd3d95cc}} 
{\bfseries Item\+\_\+in\+\_\+subselect} (const \mbox{\hyperlink{structYYLTYPE}{P\+OS}} \&pos, \mbox{\hyperlink{classItem}{Item}} $\ast$left\+\_\+expr, \mbox{\hyperlink{classPT__subselect}{P\+T\+\_\+subselect}} $\ast$pt\+\_\+subselect\+\_\+arg)
\item 
bool \mbox{\hyperlink{classItem__in__subselect_a68b1a8d10b94a1e2ff4afddc6eff2d58}{itemize}} (\mbox{\hyperlink{structParse__context}{Parse\+\_\+context}} $\ast$pc, \mbox{\hyperlink{classItem}{Item}} $\ast$$\ast$res)
\item 
\mbox{\Hypertarget{classItem__in__subselect_ae2bba75a7f481132e7a57563159f80c2}\label{classItem__in__subselect_ae2bba75a7f481132e7a57563159f80c2}} 
virtual void {\bfseries cleanup} ()
\item 
\mbox{\Hypertarget{classItem__in__subselect_ae70d9ce5b2f4ddf56264597d9e047e33}\label{classItem__in__subselect_ae70d9ce5b2f4ddf56264597d9e047e33}} 
subs\+\_\+type {\bfseries substype} ()
\item 
\mbox{\Hypertarget{classItem__in__subselect_affae4ed8436a52d70fcf0cd0b23f28b4}\label{classItem__in__subselect_affae4ed8436a52d70fcf0cd0b23f28b4}} 
virtual void {\bfseries reset} ()
\item 
\mbox{\Hypertarget{classItem__in__subselect_a7e532781a5f30fa4dd4a8508afec3728}\label{classItem__in__subselect_a7e532781a5f30fa4dd4a8508afec3728}} 
trans\+\_\+res {\bfseries select\+\_\+transformer} (st\+\_\+select\+\_\+lex $\ast$select)
\item 
trans\+\_\+res \mbox{\hyperlink{classItem__in__subselect_a31a5c942e77c98083c9b9077c51ff3f8}{select\+\_\+in\+\_\+like\+\_\+transformer}} (st\+\_\+select\+\_\+lex $\ast$select, \mbox{\hyperlink{classComp__creator}{Comp\+\_\+creator}} $\ast$func)
\item 
\mbox{\Hypertarget{classItem__in__subselect_a57fbfac8e6287d78884f61ff0b9ac0cd}\label{classItem__in__subselect_a57fbfac8e6287d78884f61ff0b9ac0cd}} 
trans\+\_\+res {\bfseries single\+\_\+value\+\_\+transformer} (st\+\_\+select\+\_\+lex $\ast$select, \mbox{\hyperlink{classComp__creator}{Comp\+\_\+creator}} $\ast$func)
\item 
\mbox{\Hypertarget{classItem__in__subselect_a94bccfd98a5de4eae5a8dcfcaba3533c}\label{classItem__in__subselect_a94bccfd98a5de4eae5a8dcfcaba3533c}} 
trans\+\_\+res {\bfseries row\+\_\+value\+\_\+transformer} (st\+\_\+select\+\_\+lex $\ast$select)
\item 
trans\+\_\+res \mbox{\hyperlink{classItem__in__subselect_ae61f900450b8847fb0cec6f79eed42fb}{single\+\_\+value\+\_\+in\+\_\+to\+\_\+exists\+\_\+transformer}} (st\+\_\+select\+\_\+lex $\ast$select, \mbox{\hyperlink{classComp__creator}{Comp\+\_\+creator}} $\ast$func)
\item 
trans\+\_\+res \mbox{\hyperlink{classItem__in__subselect_a6f5b5e6374b290d5efd086002d91ff92}{row\+\_\+value\+\_\+in\+\_\+to\+\_\+exists\+\_\+transformer}} (st\+\_\+select\+\_\+lex $\ast$select)
\item 
bool \mbox{\hyperlink{classItem__in__subselect_ae2d9db307c8214b314f387b8f0fca6ae}{walk}} (Item\+\_\+processor processor, \mbox{\hyperlink{classItem_a4e68f315ba2a26543339e9f0efed3695}{enum\+\_\+walk}} walk, uchar $\ast$arg)
\item 
\mbox{\Hypertarget{classItem__in__subselect_a6609a90c66f0226c5c445831a091bed0}\label{classItem__in__subselect_a6609a90c66f0226c5c445831a091bed0}} 
virtual bool {\bfseries exec} ()
\item 
\mbox{\Hypertarget{classItem__in__subselect_a10f20ba066005f152ea4d7c536263ab2}\label{classItem__in__subselect_a10f20ba066005f152ea4d7c536263ab2}} 
longlong {\bfseries val\+\_\+int} ()
\item 
\mbox{\Hypertarget{classItem__in__subselect_a0245f46d6a571e1a3f007d56e7545775}\label{classItem__in__subselect_a0245f46d6a571e1a3f007d56e7545775}} 
double {\bfseries val\+\_\+real} ()
\item 
String $\ast$ \mbox{\hyperlink{classItem__in__subselect_a9db1ebc564af4086152ac6daf8809b40}{val\+\_\+str}} (String $\ast$)
\item 
\mbox{\hyperlink{classmy__decimal}{my\+\_\+decimal}} $\ast$ \mbox{\hyperlink{classItem__in__subselect_a836c4419eaf559098971462e924ffb3d}{val\+\_\+decimal}} (\mbox{\hyperlink{classmy__decimal}{my\+\_\+decimal}} $\ast$)
\item 
\mbox{\Hypertarget{classItem__in__subselect_a03ca327c7314c1e69f5d416f8c07a54c}\label{classItem__in__subselect_a03ca327c7314c1e69f5d416f8c07a54c}} 
void {\bfseries update\+\_\+null\+\_\+value} ()
\item 
bool \mbox{\hyperlink{classItem__in__subselect_a137eef270a78238c1bafde29071cbbcb}{val\+\_\+bool}} ()
\item 
\mbox{\Hypertarget{classItem__in__subselect_a7f1bab265c773f771c437b29ee12165a}\label{classItem__in__subselect_a7f1bab265c773f771c437b29ee12165a}} 
void {\bfseries top\+\_\+level\+\_\+item} ()
\item 
\mbox{\Hypertarget{classItem__in__subselect_a3a696d237fecfc48900a185c103cb7cd}\label{classItem__in__subselect_a3a696d237fecfc48900a185c103cb7cd}} 
bool {\bfseries is\+\_\+top\+\_\+level\+\_\+item} () const
\item 
\mbox{\Hypertarget{classItem__in__subselect_ae16e7d224dfc73e027d5ef91a6fc6a61}\label{classItem__in__subselect_ae16e7d224dfc73e027d5ef91a6fc6a61}} 
bool {\bfseries test\+\_\+limit} ()
\item 
virtual void \mbox{\hyperlink{classItem__in__subselect_a8c80eb807d1c1219807fd45db61fad8f}{print}} (String $\ast$str, enum\+\_\+query\+\_\+type query\+\_\+type)
\item 
\mbox{\Hypertarget{classItem__in__subselect_a971e32b67d232f32f28e32e416dd60b8}\label{classItem__in__subselect_a971e32b67d232f32f28e32e416dd60b8}} 
bool {\bfseries fix\+\_\+fields} (T\+HD $\ast$thd, \mbox{\hyperlink{classItem}{Item}} $\ast$$\ast$ref)
\item 
void \mbox{\hyperlink{classItem__in__subselect_aa6c971974969097521a5a736ea6eed02}{fix\+\_\+after\+\_\+pullout}} (st\+\_\+select\+\_\+lex $\ast$parent\+\_\+select, st\+\_\+select\+\_\+lex $\ast$removed\+\_\+select)
\item 
bool \mbox{\hyperlink{classItem__in__subselect_a20740a2186be83e3357e1b2f9c707a54}{init\+\_\+left\+\_\+expr\+\_\+cache}} ()
\item 
bool \mbox{\hyperlink{classItem__in__subselect_a8ac40ba57762bb8b3060b9ebc2072def}{finalize\+\_\+exists\+\_\+transform}} (st\+\_\+select\+\_\+lex $\ast$select)
\item 
bool \mbox{\hyperlink{classItem__in__subselect_abfa2e861d58c2ac7b68875720070ad98}{finalize\+\_\+materialization\+\_\+transform}} (\mbox{\hyperlink{classJOIN}{J\+O\+IN}} $\ast$join)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classItem__in__subselect_a02e4772144cf677a730ad9a652078574}\label{classItem__in__subselect_a02e4772144cf677a730ad9a652078574}} 
\mbox{\hyperlink{classItem}{Item}} $\ast$ {\bfseries left\+\_\+expr}
\item 
\mbox{\Hypertarget{classItem__in__subselect_a5d98644e2b6b587ce96abe4e47cc4a4d}\label{classItem__in__subselect_a5d98644e2b6b587ce96abe4e47cc4a4d}} 
bool $\ast$ {\bfseries pushed\+\_\+cond\+\_\+guards}
\item 
\mbox{\Hypertarget{classItem__in__subselect_a3f0359ba673cd227ebacbe6bf802f409}\label{classItem__in__subselect_a3f0359ba673cd227ebacbe6bf802f409}} 
\mbox{\hyperlink{classItem__func__not__all}{Item\+\_\+func\+\_\+not\+\_\+all}} $\ast$ {\bfseries upper\+\_\+item}
\item 
\mbox{\Hypertarget{classItem__in__subselect_ad71d535f19790e58e8064443936640bf}\label{classItem__in__subselect_ad71d535f19790e58e8064443936640bf}} 
\mbox{\hyperlink{structTABLE__LIST}{T\+A\+B\+L\+E\+\_\+\+L\+I\+ST}} $\ast$ {\bfseries expr\+\_\+join\+\_\+nest}
\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classList}{List}}$<$ \mbox{\hyperlink{classCached__item}{Cached\+\_\+item}} $>$ $\ast$ \mbox{\hyperlink{classItem__in__subselect_a8bbfa3f7c6c193f4f1a0765419c60414}{left\+\_\+expr\+\_\+cache}}
\item 
\mbox{\Hypertarget{classItem__in__subselect_af994674268fe8e58ad87cab1e1f8c2ea}\label{classItem__in__subselect_af994674268fe8e58ad87cab1e1f8c2ea}} 
bool \mbox{\hyperlink{classItem__in__subselect_af994674268fe8e58ad87cab1e1f8c2ea}{left\+\_\+expr\+\_\+cache\+\_\+filled}}
\begin{DoxyCompactList}\small\item\em Whether left\+\_\+expr\+\_\+cache holds a value. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{classItem__in__subselect_a33b13f3f53fb842de54a042f0e467976}{need\+\_\+expr\+\_\+cache}}
\item 
\mbox{\Hypertarget{classItem__in__subselect_a48152c490f28cad1ea9bcb22f1b71a07}\label{classItem__in__subselect_a48152c490f28cad1ea9bcb22f1b71a07}} 
bool {\bfseries abort\+\_\+on\+\_\+null}
\end{DoxyCompactItemize}
\subsection*{Friends}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classItem__in__subselect_a59a757b56feedc3f33cf5e5002d9cec7}\label{classItem__in__subselect_a59a757b56feedc3f33cf5e5002d9cec7}} 
class {\bfseries Item\+\_\+ref\+\_\+null\+\_\+helper}
\item 
\mbox{\Hypertarget{classItem__in__subselect_a22ec062ef581c11539c47870475215e4}\label{classItem__in__subselect_a22ec062ef581c11539c47870475215e4}} 
class {\bfseries Item\+\_\+is\+\_\+not\+\_\+null\+\_\+test}
\item 
\mbox{\Hypertarget{classItem__in__subselect_a6d0c03141d3908698d518f2e65c89b2e}\label{classItem__in__subselect_a6d0c03141d3908698d518f2e65c89b2e}} 
class {\bfseries Item\+\_\+in\+\_\+optimizer}
\item 
\mbox{\Hypertarget{classItem__in__subselect_ab4ad88114d3bced9f04b989f73b27711}\label{classItem__in__subselect_ab4ad88114d3bced9f04b989f73b27711}} 
class {\bfseries subselect\+\_\+indexsubquery\+\_\+engine}
\item 
\mbox{\Hypertarget{classItem__in__subselect_a2f66e198b4494e15b3cbe1a83fea8022}\label{classItem__in__subselect_a2f66e198b4494e15b3cbe1a83fea8022}} 
class {\bfseries subselect\+\_\+hash\+\_\+sj\+\_\+engine}
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
Representation of IN subquery predicates of the form \char`\"{}left\+\_\+expr I\+N (\+S\+E\+L\+E\+C\+T ...)\char`\"{}.

This class has\+:
\begin{DoxyItemize}
\item A \char`\"{}subquery execution engine\char`\"{} (as a subclass of \mbox{\hyperlink{classItem__subselect}{Item\+\_\+subselect}}) that allows it to evaluate subqueries. (and this class participates in execution by having was\+\_\+null variable where part of execution result is stored.
\item Transformation methods (todo\+: more on this).
\end{DoxyItemize}

This class is not used directly, it is \char`\"{}wrapped\char`\"{} into \mbox{\hyperlink{classItem__in__optimizer}{Item\+\_\+in\+\_\+optimizer}} which provides some small bits of subquery evaluation. 

\subsection{Member Function Documentation}
\mbox{\Hypertarget{classItem__in__subselect_a8ac40ba57762bb8b3060b9ebc2072def}\label{classItem__in__subselect_a8ac40ba57762bb8b3060b9ebc2072def}} 
\index{Item\+\_\+in\+\_\+subselect@{Item\+\_\+in\+\_\+subselect}!finalize\+\_\+exists\+\_\+transform@{finalize\+\_\+exists\+\_\+transform}}
\index{finalize\+\_\+exists\+\_\+transform@{finalize\+\_\+exists\+\_\+transform}!Item\+\_\+in\+\_\+subselect@{Item\+\_\+in\+\_\+subselect}}
\subsubsection{\texorpdfstring{finalize\+\_\+exists\+\_\+transform()}{finalize\_exists\_transform()}}
{\footnotesize\ttfamily bool Item\+\_\+in\+\_\+subselect\+::finalize\+\_\+exists\+\_\+transform (\begin{DoxyParamCaption}\item[{st\+\_\+select\+\_\+lex $\ast$}]{select }\end{DoxyParamCaption})}

Once the decision to use IN-\/$>$E\+X\+I\+S\+TS has been taken, performs some last steps of this transformation. \mbox{\Hypertarget{classItem__in__subselect_abfa2e861d58c2ac7b68875720070ad98}\label{classItem__in__subselect_abfa2e861d58c2ac7b68875720070ad98}} 
\index{Item\+\_\+in\+\_\+subselect@{Item\+\_\+in\+\_\+subselect}!finalize\+\_\+materialization\+\_\+transform@{finalize\+\_\+materialization\+\_\+transform}}
\index{finalize\+\_\+materialization\+\_\+transform@{finalize\+\_\+materialization\+\_\+transform}!Item\+\_\+in\+\_\+subselect@{Item\+\_\+in\+\_\+subselect}}
\subsubsection{\texorpdfstring{finalize\+\_\+materialization\+\_\+transform()}{finalize\_materialization\_transform()}}
{\footnotesize\ttfamily bool Item\+\_\+in\+\_\+subselect\+::finalize\+\_\+materialization\+\_\+transform (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classJOIN}{J\+O\+IN}} $\ast$}]{join }\end{DoxyParamCaption})}

Once the decision to use materialization has been taken, performs some last steps of this transformation. \mbox{\Hypertarget{classItem__in__subselect_aa6c971974969097521a5a736ea6eed02}\label{classItem__in__subselect_aa6c971974969097521a5a736ea6eed02}} 
\index{Item\+\_\+in\+\_\+subselect@{Item\+\_\+in\+\_\+subselect}!fix\+\_\+after\+\_\+pullout@{fix\+\_\+after\+\_\+pullout}}
\index{fix\+\_\+after\+\_\+pullout@{fix\+\_\+after\+\_\+pullout}!Item\+\_\+in\+\_\+subselect@{Item\+\_\+in\+\_\+subselect}}
\subsubsection{\texorpdfstring{fix\+\_\+after\+\_\+pullout()}{fix\_after\_pullout()}}
{\footnotesize\ttfamily void Item\+\_\+in\+\_\+subselect\+::fix\+\_\+after\+\_\+pullout (\begin{DoxyParamCaption}\item[{st\+\_\+select\+\_\+lex $\ast$}]{parent\+\_\+select,  }\item[{st\+\_\+select\+\_\+lex $\ast$}]{removed\+\_\+select }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}

Fix used tables information for a subquery after query transformations. Common actions for all predicates involving subqueries. Most actions here involve re-\/resolving information for conditions and items belonging to the subquery. Notice that the usage information from underlying expressions is not propagated to the subquery predicate, as it belongs to inner layers of the query operator structure. However, when underlying expressions contain outer references into a select\+\_\+lex on this level, the relevant information must be updated when these expressions are resolved. 

Reimplemented from \mbox{\hyperlink{classItem__subselect_a8636b93f943b8a52f75222eb4e49c4cf}{Item\+\_\+subselect}}.

\mbox{\Hypertarget{classItem__in__subselect_a20740a2186be83e3357e1b2f9c707a54}\label{classItem__in__subselect_a20740a2186be83e3357e1b2f9c707a54}} 
\index{Item\+\_\+in\+\_\+subselect@{Item\+\_\+in\+\_\+subselect}!init\+\_\+left\+\_\+expr\+\_\+cache@{init\+\_\+left\+\_\+expr\+\_\+cache}}
\index{init\+\_\+left\+\_\+expr\+\_\+cache@{init\+\_\+left\+\_\+expr\+\_\+cache}!Item\+\_\+in\+\_\+subselect@{Item\+\_\+in\+\_\+subselect}}
\subsubsection{\texorpdfstring{init\+\_\+left\+\_\+expr\+\_\+cache()}{init\_left\_expr\_cache()}}
{\footnotesize\ttfamily bool Item\+\_\+in\+\_\+subselect\+::init\+\_\+left\+\_\+expr\+\_\+cache (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Initialize the cache of the left operand of the IN predicate.

\begin{DoxyNote}{Note}
This method has the same purpose as \mbox{\hyperlink{group__Query__Executor_ga108fbed43151ab58878335fbb84503c1}{alloc\+\_\+group\+\_\+fields()}}, but it takes a different kind of collection of items, and the list we push to is dynamically allocated.
\end{DoxyNote}

\begin{DoxyRetVals}{Return values}
{\em T\+R\+UE} & if a memory allocation error occurred \\
\hline
{\em F\+A\+L\+SE} & if success \\
\hline
\end{DoxyRetVals}
\mbox{\Hypertarget{classItem__in__subselect_a68b1a8d10b94a1e2ff4afddc6eff2d58}\label{classItem__in__subselect_a68b1a8d10b94a1e2ff4afddc6eff2d58}} 
\index{Item\+\_\+in\+\_\+subselect@{Item\+\_\+in\+\_\+subselect}!itemize@{itemize}}
\index{itemize@{itemize}!Item\+\_\+in\+\_\+subselect@{Item\+\_\+in\+\_\+subselect}}
\subsubsection{\texorpdfstring{itemize()}{itemize()}}
{\footnotesize\ttfamily bool Item\+\_\+in\+\_\+subselect\+::itemize (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structParse__context}{Parse\+\_\+context}} $\ast$}]{pc,  }\item[{\mbox{\hyperlink{classItem}{Item}} $\ast$$\ast$}]{res }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}

The same as contextualize()/contextualize\+\_\+() but with additional parameter

This function finalize the construction of \mbox{\hyperlink{classItem}{Item}} objects (see the \mbox{\hyperlink{classItem}{Item(\+P\+O\+S)}} constructor)\+: we can access/change parser contexts from the \mbox{\hyperlink{classItem__in__subselect_a68b1a8d10b94a1e2ff4afddc6eff2d58}{itemize()}} function.


\begin{DoxyParams}[1]{Parameters}
 & {\em pc} & current parse context \\
\hline
\mbox{\texttt{ out}}  & {\em res} & pointer to \char`\"{}this\char`\"{} or to a newly allocated replacement object to use in the \mbox{\hyperlink{classItem}{Item}} tree instead\\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em false} & success \\
\hline
{\em true} & syntax/\+O\+O\+M/etc error \\
\hline
\end{DoxyRetVals}


Reimplemented from \mbox{\hyperlink{classItem_a0757839d09aa77bfd92bfe071f257ae9}{Item}}.

\mbox{\Hypertarget{classItem__in__subselect_a8c80eb807d1c1219807fd45db61fad8f}\label{classItem__in__subselect_a8c80eb807d1c1219807fd45db61fad8f}} 
\index{Item\+\_\+in\+\_\+subselect@{Item\+\_\+in\+\_\+subselect}!print@{print}}
\index{print@{print}!Item\+\_\+in\+\_\+subselect@{Item\+\_\+in\+\_\+subselect}}
\subsubsection{\texorpdfstring{print()}{print()}}
{\footnotesize\ttfamily void Item\+\_\+in\+\_\+subselect\+::print (\begin{DoxyParamCaption}\item[{String $\ast$}]{str,  }\item[{enum\+\_\+query\+\_\+type}]{query\+\_\+type }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}

This method is used for to\+:
\begin{DoxyItemize}
\item to generate a view definition query (S\+E\+L\+E\+CT-\/statement);
\item to generate a S\+QL-\/query for E\+X\+P\+L\+A\+IN E\+X\+T\+E\+N\+D\+ED;
\item to generate a S\+QL-\/query to be shown in I\+N\+F\+O\+R\+M\+A\+T\+I\+O\+N\+\_\+\+S\+C\+H\+E\+MA;
\item to generate a S\+QL-\/query that looks like a prepared statement for query\+\_\+rewrite
\item debug.
\end{DoxyItemize}

For more information about view definition query, I\+N\+F\+O\+R\+M\+A\+T\+I\+O\+N\+\_\+\+S\+C\+H\+E\+MA query and why they should be generated from the \mbox{\hyperlink{classItem}{Item}}-\/tree, \begin{DoxySeeAlso}{See also}
mysql\+\_\+register\+\_\+view(). 
\end{DoxySeeAlso}


Reimplemented from \mbox{\hyperlink{classItem__exists__subselect_a795c650acea24859e6ff1d6f82d5a2ec}{Item\+\_\+exists\+\_\+subselect}}.



Reimplemented in \mbox{\hyperlink{classItem__allany__subselect_ade4b2eaa6af0cde005b082598d2e31b0}{Item\+\_\+allany\+\_\+subselect}}.

\mbox{\Hypertarget{classItem__in__subselect_a6f5b5e6374b290d5efd086002d91ff92}\label{classItem__in__subselect_a6f5b5e6374b290d5efd086002d91ff92}} 
\index{Item\+\_\+in\+\_\+subselect@{Item\+\_\+in\+\_\+subselect}!row\+\_\+value\+\_\+in\+\_\+to\+\_\+exists\+\_\+transformer@{row\+\_\+value\+\_\+in\+\_\+to\+\_\+exists\+\_\+transformer}}
\index{row\+\_\+value\+\_\+in\+\_\+to\+\_\+exists\+\_\+transformer@{row\+\_\+value\+\_\+in\+\_\+to\+\_\+exists\+\_\+transformer}!Item\+\_\+in\+\_\+subselect@{Item\+\_\+in\+\_\+subselect}}
\subsubsection{\texorpdfstring{row\+\_\+value\+\_\+in\+\_\+to\+\_\+exists\+\_\+transformer()}{row\_value\_in\_to\_exists\_transformer()}}
{\footnotesize\ttfamily Item\+\_\+subselect\+::trans\+\_\+res Item\+\_\+in\+\_\+subselect\+::row\+\_\+value\+\_\+in\+\_\+to\+\_\+exists\+\_\+transformer (\begin{DoxyParamCaption}\item[{st\+\_\+select\+\_\+lex $\ast$}]{select }\end{DoxyParamCaption})}

Tranform a (possibly non-\/correlated) IN subquery into a correlated E\+X\+I\+S\+TS.

\begin{DoxyRefDesc}{Todo}
\item[\mbox{\hyperlink{todo__todo000037}{Todo}}]The IF-\/E\+L\+SE below can be refactored so that there is no duplication of the statements that create the new conditions. For this we have to invert the IF and the F\+OR statements as this\+: for (each left operand) create the equi-\/join condition if (is\+\_\+having\+\_\+used $\vert$$\vert$ !abort\+\_\+on\+\_\+null) create the \char`\"{}is null\char`\"{} and is\+\_\+not\+\_\+null\+\_\+test items if (is\+\_\+having\+\_\+used) add the equi-\/join and the null tests to H\+A\+V\+I\+NG else add the equi-\/join and the \char`\"{}is null\char`\"{} to W\+H\+E\+RE add the is\+\_\+not\+\_\+null\+\_\+test to H\+A\+V\+I\+NG \end{DoxyRefDesc}
\mbox{\Hypertarget{classItem__in__subselect_a31a5c942e77c98083c9b9077c51ff3f8}\label{classItem__in__subselect_a31a5c942e77c98083c9b9077c51ff3f8}} 
\index{Item\+\_\+in\+\_\+subselect@{Item\+\_\+in\+\_\+subselect}!select\+\_\+in\+\_\+like\+\_\+transformer@{select\+\_\+in\+\_\+like\+\_\+transformer}}
\index{select\+\_\+in\+\_\+like\+\_\+transformer@{select\+\_\+in\+\_\+like\+\_\+transformer}!Item\+\_\+in\+\_\+subselect@{Item\+\_\+in\+\_\+subselect}}
\subsubsection{\texorpdfstring{select\+\_\+in\+\_\+like\+\_\+transformer()}{select\_in\_like\_transformer()}}
{\footnotesize\ttfamily Item\+\_\+subselect\+::trans\+\_\+res Item\+\_\+in\+\_\+subselect\+::select\+\_\+in\+\_\+like\+\_\+transformer (\begin{DoxyParamCaption}\item[{st\+\_\+select\+\_\+lex $\ast$}]{select,  }\item[{\mbox{\hyperlink{classComp__creator}{Comp\+\_\+creator}} $\ast$}]{func }\end{DoxyParamCaption})}

Prepare I\+N/\+A\+L\+L/\+A\+N\+Y/\+S\+O\+ME subquery transformation and call appropriate transformation function.

To decide which transformation procedure (scalar or row) applicable here we have to call fix\+\_\+fields() for left expression to be able to call cols() method on it. Also this method make arena management for underlying transformation methods.


\begin{DoxyParams}{Parameters}
{\em select} & Query block of subquery being transformed \\
\hline
{\em func} & creator of condition function of subquery\\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em R\+E\+S\+\_\+\+OK} & OK \\
\hline
{\em R\+E\+S\+\_\+\+R\+E\+D\+U\+CE} & OK, and current subquery was reduced during transformation \\
\hline
{\em R\+E\+S\+\_\+\+E\+R\+R\+OR} & Error \\
\hline
\end{DoxyRetVals}
\mbox{\Hypertarget{classItem__in__subselect_ae61f900450b8847fb0cec6f79eed42fb}\label{classItem__in__subselect_ae61f900450b8847fb0cec6f79eed42fb}} 
\index{Item\+\_\+in\+\_\+subselect@{Item\+\_\+in\+\_\+subselect}!single\+\_\+value\+\_\+in\+\_\+to\+\_\+exists\+\_\+transformer@{single\+\_\+value\+\_\+in\+\_\+to\+\_\+exists\+\_\+transformer}}
\index{single\+\_\+value\+\_\+in\+\_\+to\+\_\+exists\+\_\+transformer@{single\+\_\+value\+\_\+in\+\_\+to\+\_\+exists\+\_\+transformer}!Item\+\_\+in\+\_\+subselect@{Item\+\_\+in\+\_\+subselect}}
\subsubsection{\texorpdfstring{single\+\_\+value\+\_\+in\+\_\+to\+\_\+exists\+\_\+transformer()}{single\_value\_in\_to\_exists\_transformer()}}
{\footnotesize\ttfamily Item\+\_\+subselect\+::trans\+\_\+res Item\+\_\+in\+\_\+subselect\+::single\+\_\+value\+\_\+in\+\_\+to\+\_\+exists\+\_\+transformer (\begin{DoxyParamCaption}\item[{st\+\_\+select\+\_\+lex $\ast$}]{select,  }\item[{\mbox{\hyperlink{classComp__creator}{Comp\+\_\+creator}} $\ast$}]{func }\end{DoxyParamCaption})}

Transofrm an IN predicate into E\+X\+I\+S\+TS via predicate injection.

The transformation injects additional predicates into the subquery (and makes the subquery correlated) as follows.


\begin{DoxyItemize}
\item If the subquery has aggregates, G\+R\+O\+UP BY, or H\+A\+V\+I\+NG, convert to

S\+E\+L\+E\+CT ie F\+R\+OM ... H\+A\+V\+I\+NG subq\+\_\+having A\+ND trigcond(oe \$cmp\$ ref\+\_\+or\+\_\+null\+\_\+helper$<$ie$>$)
\end{DoxyItemize}

~\newline
 the addition is wrapped into trigger only when we want to distinguish between N\+U\+LL and F\+A\+L\+SE results.


\begin{DoxyItemize}
\item Otherwise (no aggregates/\+G\+R\+O\+UP B\+Y/\+H\+A\+V\+I\+NG) convert it to one of the following\+:

= If we don\textquotesingle{}t need to distinguish between N\+U\+LL and F\+A\+L\+SE subquery\+:
\end{DoxyItemize}

~\newline
 S\+E\+L\+E\+CT 1 F\+R\+OM ... W\+H\+E\+RE (oe \$cmp\$ ie) A\+ND subq\+\_\+where

= If we need to distinguish between those\+:

S\+E\+L\+E\+CT 1 F\+R\+OM ... W\+H\+E\+RE subq\+\_\+where A\+ND trigcond((oe \$cmp\$ ie) OR (ie IS N\+U\+LL)) H\+A\+V\+I\+NG trigcond($<$is\+\_\+not\+\_\+null\+\_\+test$>$(ie))

At \mbox{\hyperlink{group__Query__Optimizer_ga7f722315c64ce97cff639d705107c660}{J\+O\+I\+N\+::optimize()}} we will compare costs of materialization and E\+X\+I\+S\+TS; if the former is cheaper we will switch to it.


\begin{DoxyParams}{Parameters}
{\em select} & Query block of the subquery \\
\hline
{\em func} & Subquery comparison creator\\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em R\+E\+S\+\_\+\+OK} & Either subquery was transformed, or appopriate predicates where injected into it. \\
\hline
{\em R\+E\+S\+\_\+\+R\+E\+D\+U\+CE} & The subquery was reduced to non-\/subquery \\
\hline
{\em R\+E\+S\+\_\+\+E\+R\+R\+OR} & Error \\
\hline
\end{DoxyRetVals}
\mbox{\Hypertarget{classItem__in__subselect_a137eef270a78238c1bafde29071cbbcb}\label{classItem__in__subselect_a137eef270a78238c1bafde29071cbbcb}} 
\index{Item\+\_\+in\+\_\+subselect@{Item\+\_\+in\+\_\+subselect}!val\+\_\+bool@{val\+\_\+bool}}
\index{val\+\_\+bool@{val\+\_\+bool}!Item\+\_\+in\+\_\+subselect@{Item\+\_\+in\+\_\+subselect}}
\subsubsection{\texorpdfstring{val\+\_\+bool()}{val\_bool()}}
{\footnotesize\ttfamily bool Item\+\_\+in\+\_\+subselect\+::val\+\_\+bool (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}

\begin{DoxyRefDesc}{Todo}
\item[\mbox{\hyperlink{todo__todo000026}{Todo}}]Make this functions class dependent \end{DoxyRefDesc}


Reimplemented from \mbox{\hyperlink{classItem__exists__subselect_a2ca1dbb0f70d442c43e5360933a5a44d}{Item\+\_\+exists\+\_\+subselect}}.

\mbox{\Hypertarget{classItem__in__subselect_a836c4419eaf559098971462e924ffb3d}\label{classItem__in__subselect_a836c4419eaf559098971462e924ffb3d}} 
\index{Item\+\_\+in\+\_\+subselect@{Item\+\_\+in\+\_\+subselect}!val\+\_\+decimal@{val\+\_\+decimal}}
\index{val\+\_\+decimal@{val\+\_\+decimal}!Item\+\_\+in\+\_\+subselect@{Item\+\_\+in\+\_\+subselect}}
\subsubsection{\texorpdfstring{val\+\_\+decimal()}{val\_decimal()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classmy__decimal}{my\+\_\+decimal}} $\ast$ Item\+\_\+in\+\_\+subselect\+::val\+\_\+decimal (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classmy__decimal}{my\+\_\+decimal}} $\ast$}]{decimal\+\_\+value }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}

Return the result of E\+X\+I\+S\+TS as a decimal value

Converts the true/false result into a decimal value. Note that currently this cannot be N\+U\+LL, so if the query exection fails it will return 0.


\begin{DoxyParams}{Parameters}
{\em decimal\+\_\+value\mbox{[}out\mbox{]}} & Buffer to hold the resulting decimal value \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em Pointer} & to the converted decimal. Can\textquotesingle{}t be a N\+U\+LL pointer, as currently E\+X\+I\+S\+TS cannot return N\+U\+LL. \\
\hline
\end{DoxyRetVals}


Reimplemented from \mbox{\hyperlink{classItem__exists__subselect_aa9f79b931ce496a3f4f962c2f325bee6}{Item\+\_\+exists\+\_\+subselect}}.

\mbox{\Hypertarget{classItem__in__subselect_a9db1ebc564af4086152ac6daf8809b40}\label{classItem__in__subselect_a9db1ebc564af4086152ac6daf8809b40}} 
\index{Item\+\_\+in\+\_\+subselect@{Item\+\_\+in\+\_\+subselect}!val\+\_\+str@{val\+\_\+str}}
\index{val\+\_\+str@{val\+\_\+str}!Item\+\_\+in\+\_\+subselect@{Item\+\_\+in\+\_\+subselect}}
\subsubsection{\texorpdfstring{val\+\_\+str()}{val\_str()}}
{\footnotesize\ttfamily String $\ast$ Item\+\_\+in\+\_\+subselect\+::val\+\_\+str (\begin{DoxyParamCaption}\item[{String $\ast$}]{str }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}

Return the result of E\+X\+I\+S\+TS as a string value

Converts the true/false result into a string value. Note that currently this cannot be N\+U\+LL, so if the query exection fails it will return 0.


\begin{DoxyParams}{Parameters}
{\em decimal\+\_\+value\mbox{[}out\mbox{]}} & buffer to hold the resulting string value \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em Pointer} & to the converted string. Can\textquotesingle{}t be a N\+U\+LL pointer, as currently E\+X\+I\+S\+TS cannot return N\+U\+LL. \\
\hline
\end{DoxyRetVals}


Reimplemented from \mbox{\hyperlink{classItem__exists__subselect_a008b448e0e9dab80098ece5e2ce18881}{Item\+\_\+exists\+\_\+subselect}}.

\mbox{\Hypertarget{classItem__in__subselect_ae2d9db307c8214b314f387b8f0fca6ae}\label{classItem__in__subselect_ae2d9db307c8214b314f387b8f0fca6ae}} 
\index{Item\+\_\+in\+\_\+subselect@{Item\+\_\+in\+\_\+subselect}!walk@{walk}}
\index{walk@{walk}!Item\+\_\+in\+\_\+subselect@{Item\+\_\+in\+\_\+subselect}}
\subsubsection{\texorpdfstring{walk()}{walk()}}
{\footnotesize\ttfamily bool Item\+\_\+in\+\_\+subselect\+::walk (\begin{DoxyParamCaption}\item[{Item\+\_\+processor}]{processor,  }\item[{\mbox{\hyperlink{classItem_a4e68f315ba2a26543339e9f0efed3695}{enum\+\_\+walk}}}]{walk,  }\item[{uchar $\ast$}]{arg }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}

Traverses a tree of Items in prefix and/or postfix order. Optionally walks into subqueries.


\begin{DoxyParams}{Parameters}
{\em processor} & processor function to be invoked per item returns true to abort traversal, false to continue \\
\hline
{\em walk} & controls how to traverse the item tree W\+A\+L\+K\+\_\+\+P\+R\+E\+F\+IX\+: call processor before invoking children W\+A\+L\+K\+\_\+\+P\+O\+S\+T\+F\+IX\+: call processor after invoking children W\+A\+L\+K\+\_\+\+S\+U\+B\+Q\+U\+E\+RY go down into subqueries walk values are bit-\/coded and may be combined. Omitting both W\+A\+L\+K\+\_\+\+P\+R\+E\+F\+IX and W\+A\+L\+K\+\_\+\+P\+O\+S\+T\+F\+IX is undefined behaviour. \\
\hline
{\em arg} & Optional pointer to a walk-\/specific object\\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em false} & walk succeeded \\
\hline
{\em true} & walk aborted by agreement, an error may have been reported \\
\hline
\end{DoxyRetVals}


Reimplemented from \mbox{\hyperlink{classItem__subselect_a163a5d1a04b9bf04d352aca85c084adf}{Item\+\_\+subselect}}.



\subsection{Member Data Documentation}
\mbox{\Hypertarget{classItem__in__subselect_a8bbfa3f7c6c193f4f1a0765419c60414}\label{classItem__in__subselect_a8bbfa3f7c6c193f4f1a0765419c60414}} 
\index{Item\+\_\+in\+\_\+subselect@{Item\+\_\+in\+\_\+subselect}!left\+\_\+expr\+\_\+cache@{left\+\_\+expr\+\_\+cache}}
\index{left\+\_\+expr\+\_\+cache@{left\+\_\+expr\+\_\+cache}!Item\+\_\+in\+\_\+subselect@{Item\+\_\+in\+\_\+subselect}}
\subsubsection{\texorpdfstring{left\+\_\+expr\+\_\+cache}{left\_expr\_cache}}
{\footnotesize\ttfamily \mbox{\hyperlink{classList}{List}}$<$\mbox{\hyperlink{classCached__item}{Cached\+\_\+item}}$>$$\ast$ Item\+\_\+in\+\_\+subselect\+::left\+\_\+expr\+\_\+cache\hspace{0.3cm}{\ttfamily [protected]}}

Cache of the left operand of the subquery predicate. Allocated in the runtime memory root, for each execution, thus need not be freed. \mbox{\Hypertarget{classItem__in__subselect_a33b13f3f53fb842de54a042f0e467976}\label{classItem__in__subselect_a33b13f3f53fb842de54a042f0e467976}} 
\index{Item\+\_\+in\+\_\+subselect@{Item\+\_\+in\+\_\+subselect}!need\+\_\+expr\+\_\+cache@{need\+\_\+expr\+\_\+cache}}
\index{need\+\_\+expr\+\_\+cache@{need\+\_\+expr\+\_\+cache}!Item\+\_\+in\+\_\+subselect@{Item\+\_\+in\+\_\+subselect}}
\subsubsection{\texorpdfstring{need\+\_\+expr\+\_\+cache}{need\_expr\_cache}}
{\footnotesize\ttfamily bool Item\+\_\+in\+\_\+subselect\+::need\+\_\+expr\+\_\+cache\hspace{0.3cm}{\ttfamily [protected]}}

The need for expr cache may be optimized away, \begin{DoxySeeAlso}{See also}
\mbox{\hyperlink{classItem__in__subselect_a20740a2186be83e3357e1b2f9c707a54}{init\+\_\+left\+\_\+expr\+\_\+cache}}. 
\end{DoxySeeAlso}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
item\+\_\+subselect.\+h\item 
\mbox{\hyperlink{item__subselect_8cc}{item\+\_\+subselect.\+cc}}\end{DoxyCompactItemize}
