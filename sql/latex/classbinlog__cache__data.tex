\hypertarget{classbinlog__cache__data}{}\section{binlog\+\_\+cache\+\_\+data Class Reference}
\label{classbinlog__cache__data}\index{binlog\+\_\+cache\+\_\+data@{binlog\+\_\+cache\+\_\+data}}
Inheritance diagram for binlog\+\_\+cache\+\_\+data\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classbinlog__cache__data}
\end{center}
\end{figure}
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structbinlog__cache__data_1_1cache__state}{cache\+\_\+state}}
\item 
struct \mbox{\hyperlink{structbinlog__cache__data_1_1Flags}{Flags}}
\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classbinlog__cache__data_a6debe02d1cbcd48789c9f4222a9ad965}\label{classbinlog__cache__data_a6debe02d1cbcd48789c9f4222a9ad965}} 
{\bfseries binlog\+\_\+cache\+\_\+data} (bool trx\+\_\+cache\+\_\+arg, my\+\_\+off\+\_\+t max\+\_\+binlog\+\_\+cache\+\_\+size\+\_\+arg, ulong $\ast$ptr\+\_\+binlog\+\_\+cache\+\_\+use\+\_\+arg, ulong $\ast$ptr\+\_\+binlog\+\_\+cache\+\_\+disk\+\_\+use\+\_\+arg)
\item 
int \mbox{\hyperlink{group__Binary__Log_ga3367fa8c1daced18065f6b9dea5385fe}{finalize}} (T\+HD $\ast$thd, \mbox{\hyperlink{classLog__event}{Log\+\_\+event}} $\ast$end\+\_\+event)
\item 
int \mbox{\hyperlink{group__Binary__Log_ga16bd8b16b092443137c073f18c7e11e4}{finalize}} (T\+HD $\ast$thd, \mbox{\hyperlink{classLog__event}{Log\+\_\+event}} $\ast$end\+\_\+event, \mbox{\hyperlink{classXID__STATE}{X\+I\+D\+\_\+\+S\+T\+A\+TE}} $\ast$xs)
\item 
int \mbox{\hyperlink{group__Binary__Log_ga302d2ea7bfcbea015c329edacdac6c5a}{flush}} (T\+HD $\ast$thd, my\+\_\+off\+\_\+t $\ast$bytes, bool $\ast$wrote\+\_\+xid)
\item 
int {\bfseries write\+\_\+event} (T\+HD $\ast$thd, \mbox{\hyperlink{classLog__event}{Log\+\_\+event}} $\ast$event)
\item 
\mbox{\Hypertarget{classbinlog__cache__data_ae2ab0898b4570a3bfb462ee6b770c6c9}\label{classbinlog__cache__data_ae2ab0898b4570a3bfb462ee6b770c6c9}} 
bool {\bfseries is\+\_\+binlog\+\_\+empty} () const
\item 
\mbox{\Hypertarget{classbinlog__cache__data_aa4a0799adea7a97c40fb39de0d024e61}\label{classbinlog__cache__data_aa4a0799adea7a97c40fb39de0d024e61}} 
bool {\bfseries is\+\_\+finalized} () const
\item 
\mbox{\Hypertarget{classbinlog__cache__data_a6ec1156fd2bb61caa8d880a54c5e0c0b}\label{classbinlog__cache__data_a6ec1156fd2bb61caa8d880a54c5e0c0b}} 
\mbox{\hyperlink{classRows__log__event}{Rows\+\_\+log\+\_\+event}} $\ast$ {\bfseries pending} () const
\item 
\mbox{\Hypertarget{classbinlog__cache__data_ab36c24b642606d3a41f720395ce11cde}\label{classbinlog__cache__data_ab36c24b642606d3a41f720395ce11cde}} 
void {\bfseries set\+\_\+pending} (\mbox{\hyperlink{classRows__log__event}{Rows\+\_\+log\+\_\+event}} $\ast$const pending)
\item 
\mbox{\Hypertarget{classbinlog__cache__data_a757b7d8ea173b004f832645c82a8833d}\label{classbinlog__cache__data_a757b7d8ea173b004f832645c82a8833d}} 
void {\bfseries set\+\_\+incident} (void)
\item 
\mbox{\Hypertarget{classbinlog__cache__data_ac2b919b0c163920e9a942c3b3d3ef7e7}\label{classbinlog__cache__data_ac2b919b0c163920e9a942c3b3d3ef7e7}} 
bool {\bfseries has\+\_\+incident} (void) const
\item 
\mbox{\Hypertarget{classbinlog__cache__data_aa79f43a56b9b0717811f658b6e7aaf65}\label{classbinlog__cache__data_aa79f43a56b9b0717811f658b6e7aaf65}} 
bool {\bfseries has\+\_\+xid} () const
\item 
\mbox{\Hypertarget{classbinlog__cache__data_a3095d5e2d5c5df54dae651dc426227b2}\label{classbinlog__cache__data_a3095d5e2d5c5df54dae651dc426227b2}} 
bool {\bfseries is\+\_\+trx\+\_\+cache} () const
\item 
\mbox{\Hypertarget{classbinlog__cache__data_a171e99d541a3699b39b0576b23fe4210}\label{classbinlog__cache__data_a171e99d541a3699b39b0576b23fe4210}} 
my\+\_\+off\+\_\+t {\bfseries get\+\_\+byte\+\_\+position} () const
\item 
\mbox{\Hypertarget{classbinlog__cache__data_a6b3a72478140c920c69c7c176af7946d}\label{classbinlog__cache__data_a6b3a72478140c920c69c7c176af7946d}} 
void {\bfseries cache\+\_\+state\+\_\+rollback} (my\+\_\+off\+\_\+t pos\+\_\+to\+\_\+rollback)
\item 
\mbox{\Hypertarget{classbinlog__cache__data_a41f51603ab0998904669ce1ed80f8128}\label{classbinlog__cache__data_a41f51603ab0998904669ce1ed80f8128}} 
void {\bfseries cache\+\_\+state\+\_\+checkpoint} (my\+\_\+off\+\_\+t pos\+\_\+to\+\_\+checkpoint)
\item 
\mbox{\Hypertarget{classbinlog__cache__data_add4e571e2bcedc0c0c28034258d0a530}\label{classbinlog__cache__data_add4e571e2bcedc0c0c28034258d0a530}} 
virtual void {\bfseries reset} ()
\item 
\mbox{\Hypertarget{classbinlog__cache__data_a44c4be111a16b3fa0a5f3f6403a0613a}\label{classbinlog__cache__data_a44c4be111a16b3fa0a5f3f6403a0613a}} 
my\+\_\+off\+\_\+t {\bfseries reset\+\_\+write\+\_\+pos} (my\+\_\+off\+\_\+t pos, bool use\+\_\+reinit)
\item 
bool \mbox{\hyperlink{classbinlog__cache__data_a319126ba2342471ddccecca34d1e7964}{may\+\_\+have\+\_\+sbr\+\_\+stmts}} ()
\item 
bool \mbox{\hyperlink{classbinlog__cache__data_a335439d52a5ef045b96597ffb377c6b4}{has\+\_\+empty\+\_\+transaction}} ()
\item 
bool \mbox{\hyperlink{classbinlog__cache__data_a481b44b5de62e1c0f066cc40384c2050}{is\+\_\+empty\+\_\+or\+\_\+has\+\_\+empty\+\_\+transaction}} ()
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classbinlog__cache__data_a5fa40b1d92dffb730f78480c46e6c183}\label{classbinlog__cache__data_a5fa40b1d92dffb730f78480c46e6c183}} 
I\+O\+\_\+\+C\+A\+C\+HE {\bfseries cache\+\_\+log}
\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classbinlog__cache__data_af085a04763bdae99acbcb1d01b54d393}\label{classbinlog__cache__data_af085a04763bdae99acbcb1d01b54d393}} 
void {\bfseries truncate} (my\+\_\+off\+\_\+t pos)
\item 
int \mbox{\hyperlink{classbinlog__cache__data_a37719832e76451067746218d282b7e2b}{flush\+\_\+pending\+\_\+event}} (T\+HD $\ast$thd)
\item 
int \mbox{\hyperlink{classbinlog__cache__data_a9509b322827891d70e256bed2e9e2eb1}{remove\+\_\+pending\+\_\+event}} ()
\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classbinlog__cache__data_aff84222fe6252d009b8331a5e58c0993}\label{classbinlog__cache__data_aff84222fe6252d009b8331a5e58c0993}} 
std\+::map$<$ my\+\_\+off\+\_\+t, \mbox{\hyperlink{structbinlog__cache__data_1_1cache__state}{cache\+\_\+state}} $>$ {\bfseries cache\+\_\+state\+\_\+map}
\item 
\mbox{\Hypertarget{classbinlog__cache__data_afa6c5ea81df25eec2dfcb0a2c064c505}\label{classbinlog__cache__data_afa6c5ea81df25eec2dfcb0a2c064c505}} 
struct \mbox{\hyperlink{structbinlog__cache__data_1_1Flags}{binlog\+\_\+cache\+\_\+data\+::\+Flags}} {\bfseries flags}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Caches for non-\/transactional and transactional data before writing it to the binary log.

\begin{DoxyRefDesc}{Todo}
\item[\mbox{\hyperlink{todo__todo000003}{Todo}}]All the access functions for the flags suggest that the encapsuling is not done correctly, so try to move any logic that requires access to the flags into the cache. \end{DoxyRefDesc}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classbinlog__cache__data_a37719832e76451067746218d282b7e2b}\label{classbinlog__cache__data_a37719832e76451067746218d282b7e2b}} 
\index{binlog\+\_\+cache\+\_\+data@{binlog\+\_\+cache\+\_\+data}!flush\+\_\+pending\+\_\+event@{flush\+\_\+pending\+\_\+event}}
\index{flush\+\_\+pending\+\_\+event@{flush\+\_\+pending\+\_\+event}!binlog\+\_\+cache\+\_\+data@{binlog\+\_\+cache\+\_\+data}}
\subsubsection{\texorpdfstring{flush\+\_\+pending\+\_\+event()}{flush\_pending\_event()}}
{\footnotesize\ttfamily int binlog\+\_\+cache\+\_\+data\+::flush\+\_\+pending\+\_\+event (\begin{DoxyParamCaption}\item[{T\+HD $\ast$}]{thd }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [protected]}}

Flush pending event to the cache buffer. \mbox{\Hypertarget{classbinlog__cache__data_a335439d52a5ef045b96597ffb377c6b4}\label{classbinlog__cache__data_a335439d52a5ef045b96597ffb377c6b4}} 
\index{binlog\+\_\+cache\+\_\+data@{binlog\+\_\+cache\+\_\+data}!has\+\_\+empty\+\_\+transaction@{has\+\_\+empty\+\_\+transaction}}
\index{has\+\_\+empty\+\_\+transaction@{has\+\_\+empty\+\_\+transaction}!binlog\+\_\+cache\+\_\+data@{binlog\+\_\+cache\+\_\+data}}
\subsubsection{\texorpdfstring{has\+\_\+empty\+\_\+transaction()}{has\_empty\_transaction()}}
{\footnotesize\ttfamily bool binlog\+\_\+cache\+\_\+data\+::has\+\_\+empty\+\_\+transaction (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Check if the binlog cache contains an empty transaction, which has two binlog events \char`\"{}\+B\+E\+G\+I\+N\char`\"{} and \char`\"{}\+C\+O\+M\+M\+I\+T\char`\"{}.

\begin{DoxyReturn}{Returns}
true The binlog cache contains an empty transaction. 

false Otherwise. 
\end{DoxyReturn}
\mbox{\Hypertarget{classbinlog__cache__data_a481b44b5de62e1c0f066cc40384c2050}\label{classbinlog__cache__data_a481b44b5de62e1c0f066cc40384c2050}} 
\index{binlog\+\_\+cache\+\_\+data@{binlog\+\_\+cache\+\_\+data}!is\+\_\+empty\+\_\+or\+\_\+has\+\_\+empty\+\_\+transaction@{is\+\_\+empty\+\_\+or\+\_\+has\+\_\+empty\+\_\+transaction}}
\index{is\+\_\+empty\+\_\+or\+\_\+has\+\_\+empty\+\_\+transaction@{is\+\_\+empty\+\_\+or\+\_\+has\+\_\+empty\+\_\+transaction}!binlog\+\_\+cache\+\_\+data@{binlog\+\_\+cache\+\_\+data}}
\subsubsection{\texorpdfstring{is\+\_\+empty\+\_\+or\+\_\+has\+\_\+empty\+\_\+transaction()}{is\_empty\_or\_has\_empty\_transaction()}}
{\footnotesize\ttfamily bool binlog\+\_\+cache\+\_\+data\+::is\+\_\+empty\+\_\+or\+\_\+has\+\_\+empty\+\_\+transaction (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Check if the binlog cache is empty or contains an empty transaction, which has two binlog events \char`\"{}\+B\+E\+G\+I\+N\char`\"{} and \char`\"{}\+C\+O\+M\+M\+I\+T\char`\"{}.

\begin{DoxyReturn}{Returns}
true The binlog cache is empty or contains an empty transaction. 

false Otherwise. 
\end{DoxyReturn}
\mbox{\Hypertarget{classbinlog__cache__data_a319126ba2342471ddccecca34d1e7964}\label{classbinlog__cache__data_a319126ba2342471ddccecca34d1e7964}} 
\index{binlog\+\_\+cache\+\_\+data@{binlog\+\_\+cache\+\_\+data}!may\+\_\+have\+\_\+sbr\+\_\+stmts@{may\+\_\+have\+\_\+sbr\+\_\+stmts}}
\index{may\+\_\+have\+\_\+sbr\+\_\+stmts@{may\+\_\+have\+\_\+sbr\+\_\+stmts}!binlog\+\_\+cache\+\_\+data@{binlog\+\_\+cache\+\_\+data}}
\subsubsection{\texorpdfstring{may\+\_\+have\+\_\+sbr\+\_\+stmts()}{may\_have\_sbr\_stmts()}}
{\footnotesize\ttfamily bool binlog\+\_\+cache\+\_\+data\+::may\+\_\+have\+\_\+sbr\+\_\+stmts (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Returns information about the cache content with respect to the binlog\+\_\+format of the events.

This will be used to set a flag on G\+T\+I\+D\+\_\+\+L\+O\+G\+\_\+\+E\+V\+E\+NT stating that the transaction may have S\+BR statements or not, but the binlog dump will show this flag as \char`\"{}rbr\+\_\+only\char`\"{} when it is not set. That\textquotesingle{}s why an empty transaction should return true below, or else an empty transaction would be assumed as \char`\"{}rbr\+\_\+only\char`\"{} even not having R\+BR events.

When dumping a binary log content using mysqlbinlog client program, for any transaction assumed as \char`\"{}rbr\+\_\+only\char`\"{} it will be printed a statement changing the transaction isolation level to R\+E\+AD C\+O\+M\+M\+I\+T\+T\+ED. It doesn\textquotesingle{}t make sense to have an empty transaction \char`\"{}requiring\char`\"{} this isolation level change.

\begin{DoxyReturn}{Returns}
true The cache have S\+BR events or is empty. 

false The cache contains a transaction with no S\+BR events. 
\end{DoxyReturn}
\mbox{\Hypertarget{classbinlog__cache__data_a9509b322827891d70e256bed2e9e2eb1}\label{classbinlog__cache__data_a9509b322827891d70e256bed2e9e2eb1}} 
\index{binlog\+\_\+cache\+\_\+data@{binlog\+\_\+cache\+\_\+data}!remove\+\_\+pending\+\_\+event@{remove\+\_\+pending\+\_\+event}}
\index{remove\+\_\+pending\+\_\+event@{remove\+\_\+pending\+\_\+event}!binlog\+\_\+cache\+\_\+data@{binlog\+\_\+cache\+\_\+data}}
\subsubsection{\texorpdfstring{remove\+\_\+pending\+\_\+event()}{remove\_pending\_event()}}
{\footnotesize\ttfamily int binlog\+\_\+cache\+\_\+data\+::remove\+\_\+pending\+\_\+event (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [protected]}}

Remove the pending event. 

The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
binlog.\+cc\end{DoxyCompactItemize}
