\hypertarget{classItem__trigger__field}{}\section{Item\+\_\+trigger\+\_\+field Class Reference}
\label{classItem__trigger__field}\index{Item\+\_\+trigger\+\_\+field@{Item\+\_\+trigger\+\_\+field}}
Inheritance diagram for Item\+\_\+trigger\+\_\+field\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=5.000000cm]{classItem__trigger__field}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classItem__trigger__field_a110b88081b5be174af0a1bcd3461628a}\label{classItem__trigger__field_a110b88081b5be174af0a1bcd3461628a}} 
{\bfseries Item\+\_\+trigger\+\_\+field} (\mbox{\hyperlink{structName__resolution__context}{Name\+\_\+resolution\+\_\+context}} $\ast$context\+\_\+arg, \mbox{\hyperlink{trigger__def_8h_a21eb81babac229407b0b483596163bc2}{enum\+\_\+trigger\+\_\+variable\+\_\+type}} trigger\+\_\+var\+\_\+type\+\_\+arg, const char $\ast$field\+\_\+name\+\_\+arg, ulong priv, const bool ro)
\item 
\mbox{\Hypertarget{classItem__trigger__field_aa469314d31cae522ca7f9eefa0732422}\label{classItem__trigger__field_aa469314d31cae522ca7f9eefa0732422}} 
{\bfseries Item\+\_\+trigger\+\_\+field} (const \mbox{\hyperlink{structYYLTYPE}{P\+OS}} \&pos, \mbox{\hyperlink{trigger__def_8h_a21eb81babac229407b0b483596163bc2}{enum\+\_\+trigger\+\_\+variable\+\_\+type}} trigger\+\_\+var\+\_\+type\+\_\+arg, const char $\ast$field\+\_\+name\+\_\+arg, ulong priv, const bool ro)
\item 
void \mbox{\hyperlink{classItem__trigger__field_a4d1d3c955aad1b680dbed2cbcca5b466}{setup\+\_\+field}} (T\+HD $\ast$thd, \mbox{\hyperlink{classTable__trigger__field__support}{Table\+\_\+trigger\+\_\+field\+\_\+support}} $\ast$table\+\_\+triggers, \mbox{\hyperlink{structGRANT__INFO}{G\+R\+A\+N\+T\+\_\+\+I\+N\+FO}} $\ast$table\+\_\+grant\+\_\+info)
\item 
\mbox{\Hypertarget{classItem__trigger__field_a0eff546fadb24e6bf1f6df7f7d3a3c24}\label{classItem__trigger__field_a0eff546fadb24e6bf1f6df7f7d3a3c24}} 
enum Type {\bfseries type} () const
\item 
bool \mbox{\hyperlink{classItem__trigger__field_a8ad192808fbb5d42dbc49a0809355478}{eq}} (const \mbox{\hyperlink{classItem}{Item}} $\ast$item, bool binary\+\_\+cmp) const
\item 
bool \mbox{\hyperlink{classItem__trigger__field_ae8c6fff3b15e017433a9103bce570187}{fix\+\_\+fields}} (T\+HD $\ast$, \mbox{\hyperlink{classItem}{Item}} $\ast$$\ast$)
\item 
virtual void \mbox{\hyperlink{classItem__trigger__field_a68115abf242013d5b319a0c3c58c5384}{print}} (String $\ast$str, enum\+\_\+query\+\_\+type query\+\_\+type)
\item 
\mbox{\Hypertarget{classItem__trigger__field_acd1825f56cea002ba18209c5ce02d9fd}\label{classItem__trigger__field_acd1825f56cea002ba18209c5ce02d9fd}} 
table\+\_\+map {\bfseries used\+\_\+tables} () const
\item 
\mbox{\Hypertarget{classItem__trigger__field_a1680f8ba180662d731a35a445ab3d3fe}\label{classItem__trigger__field_a1680f8ba180662d731a35a445ab3d3fe}} 
\mbox{\hyperlink{classField}{Field}} $\ast$ {\bfseries get\+\_\+tmp\+\_\+table\+\_\+field} ()
\item 
\mbox{\Hypertarget{classItem__trigger__field_ae40d0ec235d6ee92238ad6decc0b43ed}\label{classItem__trigger__field_ae40d0ec235d6ee92238ad6decc0b43ed}} 
\mbox{\hyperlink{classItem}{Item}} $\ast$ {\bfseries copy\+\_\+or\+\_\+same} (T\+HD $\ast$thd)
\item 
\mbox{\Hypertarget{classItem__trigger__field_a910216d542e7c1f1c072dcbf6cbb5c96}\label{classItem__trigger__field_a910216d542e7c1f1c072dcbf6cbb5c96}} 
\mbox{\hyperlink{classItem}{Item}} $\ast$ {\bfseries get\+\_\+tmp\+\_\+table\+\_\+item} (T\+HD $\ast$thd)
\item 
\mbox{\Hypertarget{classItem__trigger__field_aaca4fbefb244c4610766b1f4906aa88f}\label{classItem__trigger__field_aaca4fbefb244c4610766b1f4906aa88f}} 
void {\bfseries cleanup} ()
\item 
\mbox{\Hypertarget{classItem__trigger__field_aabfe58f72b1f2f645e9369f4212e77b5}\label{classItem__trigger__field_aabfe58f72b1f2f645e9369f4212e77b5}} 
\mbox{\hyperlink{classSettable__routine__parameter}{Settable\+\_\+routine\+\_\+parameter}} $\ast$ {\bfseries get\+\_\+settable\+\_\+routine\+\_\+parameter} ()
\item 
\mbox{\Hypertarget{classItem__trigger__field_a879f4eb6a0cb5d97ba603032dad42a22}\label{classItem__trigger__field_a879f4eb6a0cb5d97ba603032dad42a22}} 
bool {\bfseries set\+\_\+value} (T\+HD $\ast$thd, \mbox{\hyperlink{classItem}{Item}} $\ast$$\ast$it)
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classItem__trigger__field_ac03098ae0412e1c5434ba96aed646646}\label{classItem__trigger__field_ac03098ae0412e1c5434ba96aed646646}} 
\mbox{\hyperlink{trigger__def_8h_a21eb81babac229407b0b483596163bc2}{enum\+\_\+trigger\+\_\+variable\+\_\+type}} {\bfseries trigger\+\_\+var\+\_\+type}
\item 
\mbox{\Hypertarget{classItem__trigger__field_a9f0dec9a85de8a67b87dd1ab9fe777e5}\label{classItem__trigger__field_a9f0dec9a85de8a67b87dd1ab9fe777e5}} 
\mbox{\hyperlink{classItem__trigger__field}{Item\+\_\+trigger\+\_\+field}} $\ast$ {\bfseries next\+\_\+trg\+\_\+field}
\item 
\mbox{\Hypertarget{classItem__trigger__field_a1e8fd9a9cd7ed47d65fc788deb3bc719}\label{classItem__trigger__field_a1e8fd9a9cd7ed47d65fc788deb3bc719}} 
\mbox{\hyperlink{classSQL__I__List}{S\+Q\+L\+\_\+\+I\+\_\+\+List}}$<$ \mbox{\hyperlink{classItem__trigger__field}{Item\+\_\+trigger\+\_\+field}} $>$ $\ast$ {\bfseries next\+\_\+trig\+\_\+field\+\_\+list}
\item 
\mbox{\Hypertarget{classItem__trigger__field_a52d71c5fee3328fc49bb05b761c6619b}\label{classItem__trigger__field_a52d71c5fee3328fc49bb05b761c6619b}} 
uint {\bfseries field\+\_\+idx}
\item 
\mbox{\Hypertarget{classItem__trigger__field_ab149ce4101102588a50ee1c23a4771e9}\label{classItem__trigger__field_ab149ce4101102588a50ee1c23a4771e9}} 
\mbox{\hyperlink{classTable__trigger__field__support}{Table\+\_\+trigger\+\_\+field\+\_\+support}} $\ast$ {\bfseries triggers}
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classItem__trigger__field_a8ad192808fbb5d42dbc49a0809355478}\label{classItem__trigger__field_a8ad192808fbb5d42dbc49a0809355478}} 
\index{Item\+\_\+trigger\+\_\+field@{Item\+\_\+trigger\+\_\+field}!eq@{eq}}
\index{eq@{eq}!Item\+\_\+trigger\+\_\+field@{Item\+\_\+trigger\+\_\+field}}
\subsubsection{\texorpdfstring{eq()}{eq()}}
{\footnotesize\ttfamily bool Item\+\_\+trigger\+\_\+field\+::eq (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classItem}{Item}} $\ast$}]{item,  }\item[{bool}]{binary\+\_\+cmp }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [virtual]}}

This function is called when\+:
\begin{DoxyItemize}
\item Comparing items in the W\+H\+E\+RE clause (when doing where optimization)
\item When trying to find an O\+R\+D\+ER B\+Y/\+G\+R\+O\+UP BY item in the S\+E\+L\+E\+CT part
\item When matching fields in multiple equality objects (Item\+\_\+equal) 
\end{DoxyItemize}

Reimplemented from \mbox{\hyperlink{classItem__field_a009fb19dc742f706ec5c8bad9a6a0c2d}{Item\+\_\+field}}.

\mbox{\Hypertarget{classItem__trigger__field_ae8c6fff3b15e017433a9103bce570187}\label{classItem__trigger__field_ae8c6fff3b15e017433a9103bce570187}} 
\index{Item\+\_\+trigger\+\_\+field@{Item\+\_\+trigger\+\_\+field}!fix\+\_\+fields@{fix\+\_\+fields}}
\index{fix\+\_\+fields@{fix\+\_\+fields}!Item\+\_\+trigger\+\_\+field@{Item\+\_\+trigger\+\_\+field}}
\subsubsection{\texorpdfstring{fix\+\_\+fields()}{fix\_fields()}}
{\footnotesize\ttfamily bool Item\+\_\+trigger\+\_\+field\+::fix\+\_\+fields (\begin{DoxyParamCaption}\item[{T\+HD $\ast$}]{thd,  }\item[{\mbox{\hyperlink{classItem}{Item}} $\ast$$\ast$}]{reference }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}

Resolve the name of a column reference.

The method resolves the column reference represented by \textquotesingle{}this\textquotesingle{} as a column present in one of\+: F\+R\+OM clause, S\+E\+L\+E\+CT clause, G\+R\+O\+UP BY clause of a query Q, or in outer queries that contain Q.

The name resolution algorithm used is (where \mbox{[}T\+\_\+j\mbox{]} is an optional table name that qualifies the column name)\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{resolve\_column\_reference([T\_j].col\_ref\_i)}
\DoxyCodeLine{\{}
\DoxyCodeLine{  search \textcolor{keywordflow}{for} a column or derived column named col\_ref\_i}
\DoxyCodeLine{  [in table T\_j] in the FROM clause of Q;}
\DoxyCodeLine{}
\DoxyCodeLine{  \textcolor{keywordflow}{if} such a column is NOT found AND    \textcolor{comment}{// Lookup in outer queries.}}
\DoxyCodeLine{     there are outer queries}
\DoxyCodeLine{  \{}
\DoxyCodeLine{    \textcolor{keywordflow}{for each} outer query Q\_k beginning from the inner-most one}
\DoxyCodeLine{    \{}
\DoxyCodeLine{      search \textcolor{keywordflow}{for} a column or derived column named col\_ref\_i}
\DoxyCodeLine{      [in table T\_j] in the FROM clause of Q\_k;}
\DoxyCodeLine{}
\DoxyCodeLine{      \textcolor{keywordflow}{if} such a column is not found}
\DoxyCodeLine{        Search \textcolor{keywordflow}{for} a column or derived column named col\_ref\_i}
\DoxyCodeLine{        [in table T\_j] in the SELECT and GROUP clauses of Q\_k.}
\DoxyCodeLine{    \}}
\DoxyCodeLine{  \}}
\DoxyCodeLine{\}}
\end{DoxyCode}


Notice that compared to \mbox{\hyperlink{classItem__ref_a6a78e05b0db89e799f61808c621b808f}{Item\+\_\+ref\+::fix\+\_\+fields}}, here we first search the F\+R\+OM clause, and then we search the S\+E\+L\+E\+CT and G\+R\+O\+UP BY clauses.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em thd} & current thread \\
\hline
\mbox{\texttt{ in,out}}  & {\em reference} & view column if this item was resolved to a view column\\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em T\+R\+UE} & if error \\
\hline
{\em F\+A\+L\+SE} & on success \\
\hline
\end{DoxyRetVals}


Reimplemented from \mbox{\hyperlink{classItem__field_af2e31f1efd8af31c01f0e6dc8f41aea6}{Item\+\_\+field}}.

\mbox{\Hypertarget{classItem__trigger__field_a68115abf242013d5b319a0c3c58c5384}\label{classItem__trigger__field_a68115abf242013d5b319a0c3c58c5384}} 
\index{Item\+\_\+trigger\+\_\+field@{Item\+\_\+trigger\+\_\+field}!print@{print}}
\index{print@{print}!Item\+\_\+trigger\+\_\+field@{Item\+\_\+trigger\+\_\+field}}
\subsubsection{\texorpdfstring{print()}{print()}}
{\footnotesize\ttfamily void Item\+\_\+trigger\+\_\+field\+::print (\begin{DoxyParamCaption}\item[{String $\ast$}]{str,  }\item[{enum\+\_\+query\+\_\+type}]{query\+\_\+type }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}

This method is used for to\+:
\begin{DoxyItemize}
\item to generate a view definition query (S\+E\+L\+E\+CT-\/statement);
\item to generate a S\+QL-\/query for E\+X\+P\+L\+A\+IN E\+X\+T\+E\+N\+D\+ED;
\item to generate a S\+QL-\/query to be shown in I\+N\+F\+O\+R\+M\+A\+T\+I\+O\+N\+\_\+\+S\+C\+H\+E\+MA;
\item to generate a S\+QL-\/query that looks like a prepared statement for query\+\_\+rewrite
\item debug.
\end{DoxyItemize}

For more information about view definition query, I\+N\+F\+O\+R\+M\+A\+T\+I\+O\+N\+\_\+\+S\+C\+H\+E\+MA query and why they should be generated from the \mbox{\hyperlink{classItem}{Item}}-\/tree, \begin{DoxySeeAlso}{See also}
mysql\+\_\+register\+\_\+view(). 
\end{DoxySeeAlso}


Reimplemented from \mbox{\hyperlink{classItem__field_a40b28e2bc9886f81e8ad19c64efb1408}{Item\+\_\+field}}.

\mbox{\Hypertarget{classItem__trigger__field_a4d1d3c955aad1b680dbed2cbcca5b466}\label{classItem__trigger__field_a4d1d3c955aad1b680dbed2cbcca5b466}} 
\index{Item\+\_\+trigger\+\_\+field@{Item\+\_\+trigger\+\_\+field}!setup\+\_\+field@{setup\+\_\+field}}
\index{setup\+\_\+field@{setup\+\_\+field}!Item\+\_\+trigger\+\_\+field@{Item\+\_\+trigger\+\_\+field}}
\subsubsection{\texorpdfstring{setup\+\_\+field()}{setup\_field()}}
{\footnotesize\ttfamily void Item\+\_\+trigger\+\_\+field\+::setup\+\_\+field (\begin{DoxyParamCaption}\item[{T\+HD $\ast$}]{thd,  }\item[{\mbox{\hyperlink{classTable__trigger__field__support}{Table\+\_\+trigger\+\_\+field\+\_\+support}} $\ast$}]{table\+\_\+triggers,  }\item[{\mbox{\hyperlink{structGRANT__INFO}{G\+R\+A\+N\+T\+\_\+\+I\+N\+FO}} $\ast$}]{table\+\_\+grant\+\_\+info }\end{DoxyParamCaption})}

Find index of \mbox{\hyperlink{classField}{Field}} object which will be appropriate for item representing field of row being changed in trigger.


\begin{DoxyParams}{Parameters}
{\em thd} & current thread context \\
\hline
{\em table} & table of trigger (and where we looking for fields) \\
\hline
{\em table\+\_\+triggers} & \mbox{\hyperlink{classTable__trigger__field__support}{Table\+\_\+trigger\+\_\+field\+\_\+support}} instance. Do not use T\+A\+B\+L\+E\+::triggers as it might be not initialized at the moment. \\
\hline
{\em table\+\_\+grant\+\_\+info} & \mbox{\hyperlink{structGRANT__INFO}{G\+R\+A\+N\+T\+\_\+\+I\+N\+FO}} of the subject table\\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
This function does almost the same as \mbox{\hyperlink{classItem__trigger__field_ae8c6fff3b15e017433a9103bce570187}{fix\+\_\+fields()}} for \mbox{\hyperlink{classItem__field}{Item\+\_\+field}} but is invoked right after trigger definition parsing. Since at this stage we can\textquotesingle{}t say exactly what \mbox{\hyperlink{classField}{Field}} object (corresponding to T\+A\+B\+L\+E\+::record\mbox{[}0\mbox{]} or T\+A\+B\+L\+E\+::record\mbox{[}1\mbox{]}) should be bound to this \mbox{\hyperlink{classItem}{Item}}, we only find out index of the \mbox{\hyperlink{classField}{Field}} and then select concrete \mbox{\hyperlink{classField}{Field}} object in \mbox{\hyperlink{classItem__trigger__field_ae8c6fff3b15e017433a9103bce570187}{fix\+\_\+fields()}} (by that time Table\+\_\+trigger\+\_\+dispatcher\+::old\+\_\+field/ new\+\_\+field should point to proper array of Fields). It also binds \mbox{\hyperlink{classItem__trigger__field}{Item\+\_\+trigger\+\_\+field}} to \mbox{\hyperlink{classTable__trigger__field__support}{Table\+\_\+trigger\+\_\+field\+\_\+support}} object for table of trigger which uses this item. Another difference is that the field is not marked in read\+\_\+set/write\+\_\+set. 
\end{DoxyNote}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
item.\+h\item 
item.\+cc\end{DoxyCompactItemize}
