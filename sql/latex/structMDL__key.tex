\hypertarget{structMDL__key}{}\section{M\+D\+L\+\_\+key Struct Reference}
\label{structMDL__key}\index{M\+D\+L\+\_\+key@{M\+D\+L\+\_\+key}}


{\ttfamily \#include $<$mdl.\+h$>$}

\subsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
enum \mbox{\hyperlink{structMDL__key_a391ec4bd98fec6852a48f7856546ed3b}{enum\+\_\+mdl\+\_\+namespace}} \{ \newline
{\bfseries G\+L\+O\+B\+AL} =0, 
{\bfseries T\+A\+B\+L\+E\+S\+P\+A\+CE}, 
{\bfseries S\+C\+H\+E\+MA}, 
{\bfseries T\+A\+B\+LE}, 
\newline
{\bfseries F\+U\+N\+C\+T\+I\+ON}, 
{\bfseries P\+R\+O\+C\+E\+D\+U\+RE}, 
{\bfseries T\+R\+I\+G\+G\+ER}, 
{\bfseries E\+V\+E\+NT}, 
\newline
{\bfseries C\+O\+M\+M\+IT}, 
{\bfseries U\+S\+E\+R\+\_\+\+L\+E\+V\+E\+L\+\_\+\+L\+O\+CK}, 
{\bfseries L\+O\+C\+K\+I\+N\+G\+\_\+\+S\+E\+R\+V\+I\+CE}, 
{\bfseries B\+A\+C\+K\+UP}, 
\newline
{\bfseries B\+I\+N\+L\+OG}, 
{\bfseries N\+A\+M\+E\+S\+P\+A\+C\+E\+\_\+\+E\+ND}
 \}
\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{structMDL__key_a1b08a07c4e9650a662feabb466507404}\label{structMDL__key_a1b08a07c4e9650a662feabb466507404}} 
const uchar $\ast$ {\bfseries ptr} () const
\item 
\mbox{\Hypertarget{structMDL__key_a5f901f5163e7887d1e482241e4813f9e}\label{structMDL__key_a5f901f5163e7887d1e482241e4813f9e}} 
uint {\bfseries length} () const
\item 
\mbox{\Hypertarget{structMDL__key_a6d996da020bfc9851710b4ca44f30d51}\label{structMDL__key_a6d996da020bfc9851710b4ca44f30d51}} 
const char $\ast$ {\bfseries db\+\_\+name} () const
\item 
\mbox{\Hypertarget{structMDL__key_a15208204dd28afcfc756941b368b236a}\label{structMDL__key_a15208204dd28afcfc756941b368b236a}} 
uint {\bfseries db\+\_\+name\+\_\+length} () const
\item 
\mbox{\Hypertarget{structMDL__key_adf33ece720f68e35f1439813694297e4}\label{structMDL__key_adf33ece720f68e35f1439813694297e4}} 
const char $\ast$ {\bfseries name} () const
\item 
\mbox{\Hypertarget{structMDL__key_a192c557333fbba426a4bc31eb59e084e}\label{structMDL__key_a192c557333fbba426a4bc31eb59e084e}} 
uint {\bfseries name\+\_\+length} () const
\item 
\mbox{\Hypertarget{structMDL__key_a3c7ad7b46384b15803aa0b77b3bd52f6}\label{structMDL__key_a3c7ad7b46384b15803aa0b77b3bd52f6}} 
\mbox{\hyperlink{structMDL__key_a391ec4bd98fec6852a48f7856546ed3b}{enum\+\_\+mdl\+\_\+namespace}} {\bfseries mdl\+\_\+namespace} () const
\item 
void \mbox{\hyperlink{structMDL__key_a3815fd610e5670602ecffd82b695d1e7}{mdl\+\_\+key\+\_\+init}} (\mbox{\hyperlink{structMDL__key_a391ec4bd98fec6852a48f7856546ed3b}{enum\+\_\+mdl\+\_\+namespace}} mdl\+\_\+namespace, const char $\ast$db, const char $\ast$name)
\item 
\mbox{\Hypertarget{structMDL__key_a409fb8b6038ac18165d3d291373c0319}\label{structMDL__key_a409fb8b6038ac18165d3d291373c0319}} 
void {\bfseries mdl\+\_\+key\+\_\+init} (const \mbox{\hyperlink{structMDL__key}{M\+D\+L\+\_\+key}} $\ast$rhs)
\item 
\mbox{\Hypertarget{structMDL__key_a9f5a9fa542651ab35c4f9ee4f99846ee}\label{structMDL__key_a9f5a9fa542651ab35c4f9ee4f99846ee}} 
void {\bfseries reset} ()
\item 
\mbox{\Hypertarget{structMDL__key_a213166cb4050445cbe7353448ef5d578}\label{structMDL__key_a213166cb4050445cbe7353448ef5d578}} 
bool {\bfseries is\+\_\+equal} (const \mbox{\hyperlink{structMDL__key}{M\+D\+L\+\_\+key}} $\ast$rhs) const
\item 
int \mbox{\hyperlink{structMDL__key_a0fd5e296b28b81a930cd59df5f23df59}{cmp}} (const \mbox{\hyperlink{structMDL__key}{M\+D\+L\+\_\+key}} $\ast$rhs) const
\item 
\mbox{\Hypertarget{structMDL__key_afae7725965634f5248fdf3efb4f9da14}\label{structMDL__key_afae7725965634f5248fdf3efb4f9da14}} 
{\bfseries M\+D\+L\+\_\+key} (const \mbox{\hyperlink{structMDL__key}{M\+D\+L\+\_\+key}} $\ast$rhs)
\item 
\mbox{\Hypertarget{structMDL__key_abcae5989a7728de6cb2d822d7a66487b}\label{structMDL__key_abcae5989a7728de6cb2d822d7a66487b}} 
{\bfseries M\+D\+L\+\_\+key} (\mbox{\hyperlink{structMDL__key_a391ec4bd98fec6852a48f7856546ed3b}{enum\+\_\+mdl\+\_\+namespace}} namespace\+\_\+arg, const char $\ast$db\+\_\+arg, const char $\ast$name\+\_\+arg)
\item 
const P\+S\+I\+\_\+stage\+\_\+info $\ast$ \mbox{\hyperlink{structMDL__key_ac6f4051535fef0ad4f557a551bd1aa77}{get\+\_\+wait\+\_\+state\+\_\+name}} () const
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Metadata lock object key.

A lock is requested or granted based on a fully qualified name and type. E.\+g. They key for a table consists of $<$0 (=table)$>$+$<$database$>$+\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{0}{|X[-1]}|}
\hline
\end{longtabu}
Elsewhere in the comments this triple will be referred to simply as \char`\"{}key\char`\"{} or \char`\"{}name\char`\"{}. 

\subsection{Member Enumeration Documentation}
\mbox{\Hypertarget{structMDL__key_a391ec4bd98fec6852a48f7856546ed3b}\label{structMDL__key_a391ec4bd98fec6852a48f7856546ed3b}} 
\index{M\+D\+L\+\_\+key@{M\+D\+L\+\_\+key}!enum\+\_\+mdl\+\_\+namespace@{enum\+\_\+mdl\+\_\+namespace}}
\index{enum\+\_\+mdl\+\_\+namespace@{enum\+\_\+mdl\+\_\+namespace}!M\+D\+L\+\_\+key@{M\+D\+L\+\_\+key}}
\subsubsection{\texorpdfstring{enum\+\_\+mdl\+\_\+namespace}{enum\_mdl\_namespace}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{structMDL__key_a391ec4bd98fec6852a48f7856546ed3b}{M\+D\+L\+\_\+key\+::enum\+\_\+mdl\+\_\+namespace}}}

Object namespaces. Sic\+: when adding a new member to this enum make sure to update m\+\_\+namespace\+\_\+to\+\_\+wait\+\_\+state\+\_\+name array in mdl.\+cc!

Different types of objects exist in different namespaces
\begin{DoxyItemize}
\item G\+L\+O\+B\+AL is used for the global read lock.
\item T\+A\+B\+L\+E\+S\+P\+A\+CE is for tablespaces.
\item S\+C\+H\+E\+MA is for schemas (aka databases).
\item \mbox{\hyperlink{structTABLE}{T\+A\+B\+LE}} is for tables and views.
\item F\+U\+N\+C\+T\+I\+ON is for stored functions.
\item P\+R\+O\+C\+E\+D\+U\+RE is for stored procedures.
\item T\+R\+I\+G\+G\+ER is for triggers.
\item E\+V\+E\+NT is for event scheduler events.
\item C\+O\+M\+M\+IT is for enabling the global read lock to block commits.
\item U\+S\+E\+R\+\_\+\+L\+E\+V\+E\+L\+\_\+\+L\+O\+CK is for user-\/level locks.
\item L\+O\+C\+K\+I\+N\+G\+\_\+\+S\+E\+R\+V\+I\+CE is for the name plugin RW-\/lock service Note that although there isn\textquotesingle{}t metadata locking on triggers, it\textquotesingle{}s necessary to have a separate namespace for them since \mbox{\hyperlink{structMDL__key}{M\+D\+L\+\_\+key}} is also used outside of the M\+DL subsystem. Also note that requests waiting for user-\/level locks get special treatment -\/ waiting is aborted if connection to client is lost. 
\end{DoxyItemize}

\subsection{Member Function Documentation}
\mbox{\Hypertarget{structMDL__key_a0fd5e296b28b81a930cd59df5f23df59}\label{structMDL__key_a0fd5e296b28b81a930cd59df5f23df59}} 
\index{M\+D\+L\+\_\+key@{M\+D\+L\+\_\+key}!cmp@{cmp}}
\index{cmp@{cmp}!M\+D\+L\+\_\+key@{M\+D\+L\+\_\+key}}
\subsubsection{\texorpdfstring{cmp()}{cmp()}}
{\footnotesize\ttfamily int M\+D\+L\+\_\+key\+::cmp (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{structMDL__key}{M\+D\+L\+\_\+key}} $\ast$}]{rhs }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

Compare two M\+DL keys lexicographically. \mbox{\Hypertarget{structMDL__key_ac6f4051535fef0ad4f557a551bd1aa77}\label{structMDL__key_ac6f4051535fef0ad4f557a551bd1aa77}} 
\index{M\+D\+L\+\_\+key@{M\+D\+L\+\_\+key}!get\+\_\+wait\+\_\+state\+\_\+name@{get\+\_\+wait\+\_\+state\+\_\+name}}
\index{get\+\_\+wait\+\_\+state\+\_\+name@{get\+\_\+wait\+\_\+state\+\_\+name}!M\+D\+L\+\_\+key@{M\+D\+L\+\_\+key}}
\subsubsection{\texorpdfstring{get\+\_\+wait\+\_\+state\+\_\+name()}{get\_wait\_state\_name()}}
{\footnotesize\ttfamily const P\+S\+I\+\_\+stage\+\_\+info$\ast$ M\+D\+L\+\_\+key\+::get\+\_\+wait\+\_\+state\+\_\+name (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}

Get thread state name to be used in case when we have to wait on resource identified by key. \mbox{\Hypertarget{structMDL__key_a3815fd610e5670602ecffd82b695d1e7}\label{structMDL__key_a3815fd610e5670602ecffd82b695d1e7}} 
\index{M\+D\+L\+\_\+key@{M\+D\+L\+\_\+key}!mdl\+\_\+key\+\_\+init@{mdl\+\_\+key\+\_\+init}}
\index{mdl\+\_\+key\+\_\+init@{mdl\+\_\+key\+\_\+init}!M\+D\+L\+\_\+key@{M\+D\+L\+\_\+key}}
\subsubsection{\texorpdfstring{mdl\+\_\+key\+\_\+init()}{mdl\_key\_init()}}
{\footnotesize\ttfamily void M\+D\+L\+\_\+key\+::mdl\+\_\+key\+\_\+init (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structMDL__key_a391ec4bd98fec6852a48f7856546ed3b}{enum\+\_\+mdl\+\_\+namespace}}}]{mdl\+\_\+namespace,  }\item[{const char $\ast$}]{db,  }\item[{const char $\ast$}]{name }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Construct a metadata lock key from a triplet (mdl\+\_\+namespace, database and name).

\begin{DoxyRemark}{Remarks}
The key for a table is $<$mdl\+\_\+namespace$>$+$<$database name$>$=\char`\"{}\char`\"{}$>$+\tabulinesep=1mm
\begin{longtabu}spread 0pt [c]{*{0}{|X[-1]}|}
\hline
\end{longtabu}
mdl\+\_\+namespace Id of namespace of object to be locked 
\end{DoxyRemark}

\begin{DoxyParams}{Parameters}
{\em db} & Name of database to which the object belongs \\
\hline
{\em name} & Name of of the object \\
\hline
\end{DoxyParams}


The documentation for this struct was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
mdl.\+h\item 
mdl.\+cc\end{DoxyCompactItemize}
