\hypertarget{classSys__var__multi__enum}{}\section{Sys\+\_\+var\+\_\+multi\+\_\+enum Class Reference}
\label{classSys__var__multi__enum}\index{Sys\+\_\+var\+\_\+multi\+\_\+enum@{Sys\+\_\+var\+\_\+multi\+\_\+enum}}


{\ttfamily \#include $<$sys\+\_\+vars.\+h$>$}

Inheritance diagram for Sys\+\_\+var\+\_\+multi\+\_\+enum\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{classSys__var__multi__enum}
\end{center}
\end{figure}
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structSys__var__multi__enum_1_1ALIAS}{A\+L\+I\+AS}}
\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classSys__var__multi__enum_ac0836078707c904cf4bb8b08ab5fe1e8}{Sys\+\_\+var\+\_\+multi\+\_\+enum}} (const char $\ast$name\+\_\+arg, const char $\ast$comment, int flag\+\_\+args, ptrdiff\+\_\+t off, size\+\_\+t size, \mbox{\hyperlink{structCMD__LINE}{C\+M\+D\+\_\+\+L\+I\+NE}} getopt, const \mbox{\hyperlink{structSys__var__multi__enum_1_1ALIAS}{A\+L\+I\+AS}} aliases\+\_\+arg\mbox{[}$\,$\mbox{]}, uint value\+\_\+count\+\_\+arg, uint def\+\_\+val, uint command\+\_\+line\+\_\+no\+\_\+value\+\_\+arg, \mbox{\hyperlink{classPolyLock}{Poly\+Lock}} $\ast$lock=0, enum \mbox{\hyperlink{classsys__var_a664520ec82191888717c86085bfa83ce}{binlog\+\_\+status\+\_\+enum}} binlog\+\_\+status\+\_\+arg=V\+A\+R\+I\+A\+B\+L\+E\+\_\+\+N\+O\+T\+\_\+\+I\+N\+\_\+\+B\+I\+N\+L\+OG, on\+\_\+check\+\_\+function on\+\_\+check\+\_\+func=0, on\+\_\+update\+\_\+function on\+\_\+update\+\_\+func=0, const char $\ast$substitute=0, int parse\+\_\+flag=P\+A\+R\+S\+E\+\_\+\+N\+O\+R\+M\+AL)
\item 
int \mbox{\hyperlink{classSys__var__multi__enum_a96baf73f0d0ef4d45e1961218771809e}{find\+\_\+value}} (const char $\ast$text)
\item 
const char $\ast$ \mbox{\hyperlink{classSys__var__multi__enum_ac0ae51abfc59daf86aeb51b29fc99164}{fixup\+\_\+command\+\_\+line}} (const char $\ast$value\+\_\+str)
\item 
\mbox{\Hypertarget{classSys__var__multi__enum_a567263dc756ae09a8940ab531d8dbe67}\label{classSys__var__multi__enum_a567263dc756ae09a8940ab531d8dbe67}} 
bool {\bfseries do\+\_\+check} (T\+HD $\ast$thd, \mbox{\hyperlink{classset__var}{set\+\_\+var}} $\ast$var)
\item 
\mbox{\Hypertarget{classSys__var__multi__enum_a4ddae894dcd9c451ce54a8a9d8ef9547}\label{classSys__var__multi__enum_a4ddae894dcd9c451ce54a8a9d8ef9547}} 
bool {\bfseries check\+\_\+update\+\_\+type} (Item\+\_\+result type)
\item 
\mbox{\Hypertarget{classSys__var__multi__enum_acbaae3148517ba90b5afc72f84d2e739}\label{classSys__var__multi__enum_acbaae3148517ba90b5afc72f84d2e739}} 
bool {\bfseries session\+\_\+update} (T\+HD $\ast$thd, \mbox{\hyperlink{classset__var}{set\+\_\+var}} $\ast$var)
\item 
\mbox{\Hypertarget{classSys__var__multi__enum_ae498b94a10a8dd2e6714d1da1008a126}\label{classSys__var__multi__enum_ae498b94a10a8dd2e6714d1da1008a126}} 
bool {\bfseries global\+\_\+update} (T\+HD $\ast$thd, \mbox{\hyperlink{classset__var}{set\+\_\+var}} $\ast$var)
\item 
void \mbox{\hyperlink{classSys__var__multi__enum_a0590426cff9c64e48b5edef6791f218e}{session\+\_\+save\+\_\+default}} (T\+HD $\ast$thd, \mbox{\hyperlink{classset__var}{set\+\_\+var}} $\ast$var)
\item 
void \mbox{\hyperlink{classSys__var__multi__enum_ab563d457fe100f28b325665858d41253}{global\+\_\+save\+\_\+default}} (T\+HD $\ast$thd, \mbox{\hyperlink{classset__var}{set\+\_\+var}} $\ast$var)
\item 
uchar $\ast$ \mbox{\hyperlink{classSys__var__multi__enum_a70b21626366df65d6fa0b43b7d89b594}{session\+\_\+value\+\_\+ptr}} (T\+HD $\ast$running\+\_\+thd, T\+HD $\ast$target\+\_\+thd, L\+E\+X\+\_\+\+S\+T\+R\+I\+NG $\ast$base)
\item 
\mbox{\Hypertarget{classSys__var__multi__enum_aea6028bb95f3995c261f01d40c826ede}\label{classSys__var__multi__enum_aea6028bb95f3995c261f01d40c826ede}} 
uchar $\ast$ {\bfseries global\+\_\+value\+\_\+ptr} (T\+HD $\ast$thd, L\+E\+X\+\_\+\+S\+T\+R\+I\+NG $\ast$base)
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
A variant of enum where\+:
\begin{DoxyItemize}
\item Each value may have multiple enum-\/like aliases.
\item Instances of the class can specify different default values for the cases\+:
\begin{DoxyItemize}
\item User specifies the command-\/line option without a value (i.\+e., --option, not --option=value).
\item User does not specify a command-\/line option at all.
\end{DoxyItemize}
\end{DoxyItemize}

This exists mainly to allow extending a variable that once was boolean in a GA version, into an enumeration type. Booleans accept multiple aliases (0=off=false, 1=on=true), but \mbox{\hyperlink{classSys__var__enum}{Sys\+\_\+var\+\_\+enum}} does not, so we could not use \mbox{\hyperlink{classSys__var__enum}{Sys\+\_\+var\+\_\+enum}} without breaking backward compatibility. Moreover, booleans default to false if option is not given, and true if option is given without value.

This is {\itshape incompatible} with boolean in the following sense\+: \textquotesingle{}S\+E\+L\+E\+CT @variable\textquotesingle{} returns 0 or 1 for a boolean, whereas this class (similar to enum) returns the textual form. (Note that both boolean, enum, and this class return the textual form in S\+H\+OW V\+A\+R\+I\+A\+B\+L\+ES and S\+E\+L\+E\+CT $\ast$ F\+R\+OM information\+\_\+schema.\+variables).

See enforce\+\_\+gtid\+\_\+consistency for an example of how this can be used. 

\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classSys__var__multi__enum_ac0836078707c904cf4bb8b08ab5fe1e8}\label{classSys__var__multi__enum_ac0836078707c904cf4bb8b08ab5fe1e8}} 
\index{Sys\+\_\+var\+\_\+multi\+\_\+enum@{Sys\+\_\+var\+\_\+multi\+\_\+enum}!Sys\+\_\+var\+\_\+multi\+\_\+enum@{Sys\+\_\+var\+\_\+multi\+\_\+enum}}
\index{Sys\+\_\+var\+\_\+multi\+\_\+enum@{Sys\+\_\+var\+\_\+multi\+\_\+enum}!Sys\+\_\+var\+\_\+multi\+\_\+enum@{Sys\+\_\+var\+\_\+multi\+\_\+enum}}
\subsubsection{\texorpdfstring{Sys\+\_\+var\+\_\+multi\+\_\+enum()}{Sys\_var\_multi\_enum()}}
{\footnotesize\ttfamily Sys\+\_\+var\+\_\+multi\+\_\+enum\+::\+Sys\+\_\+var\+\_\+multi\+\_\+enum (\begin{DoxyParamCaption}\item[{const char $\ast$}]{name\+\_\+arg,  }\item[{const char $\ast$}]{comment,  }\item[{int}]{flag\+\_\+args,  }\item[{ptrdiff\+\_\+t}]{off,  }\item[{size\+\_\+t}]{size,  }\item[{\mbox{\hyperlink{structCMD__LINE}{C\+M\+D\+\_\+\+L\+I\+NE}}}]{getopt,  }\item[{const \mbox{\hyperlink{structSys__var__multi__enum_1_1ALIAS}{A\+L\+I\+AS}}}]{aliases\+\_\+arg\mbox{[}$\,$\mbox{]},  }\item[{uint}]{value\+\_\+count\+\_\+arg,  }\item[{uint}]{def\+\_\+val,  }\item[{uint}]{command\+\_\+line\+\_\+no\+\_\+value\+\_\+arg,  }\item[{\mbox{\hyperlink{classPolyLock}{Poly\+Lock}} $\ast$}]{lock = {\ttfamily 0},  }\item[{enum \mbox{\hyperlink{classsys__var_a664520ec82191888717c86085bfa83ce}{binlog\+\_\+status\+\_\+enum}}}]{binlog\+\_\+status\+\_\+arg = {\ttfamily VARIABLE\+\_\+NOT\+\_\+IN\+\_\+BINLOG},  }\item[{on\+\_\+check\+\_\+function}]{on\+\_\+check\+\_\+func = {\ttfamily 0},  }\item[{on\+\_\+update\+\_\+function}]{on\+\_\+update\+\_\+func = {\ttfamily 0},  }\item[{const char $\ast$}]{substitute = {\ttfamily 0},  }\item[{int}]{parse\+\_\+flag = {\ttfamily PARSE\+\_\+NORMAL} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Class specific parameters\+:


\begin{DoxyParams}{Parameters}
{\em aliases\+\_\+arg} & Array of A\+L\+I\+A\+Ses, indicating which textual values map to which number. Should be terminated with an \mbox{\hyperlink{structSys__var__multi__enum_1_1ALIAS}{A\+L\+I\+AS}} having member variable alias set to N\+U\+LL. The first `value\+\_\+count\+\_\+arg' elements must map to 0, 1, etc; these will be used when the value is displayed. Remaining elements may appear in arbitrary order.\\
\hline
{\em value\+\_\+count\+\_\+arg} & The number of allowed integer values.\\
\hline
{\em def\+\_\+val} & The default value if no command line option is given. This must be a valid index into the aliases\+\_\+arg array, but it does not have to be less than value\+\_\+count. The corresponding alias will be used in mysqld --help to show the default value.\\
\hline
{\em command\+\_\+line\+\_\+no\+\_\+value} & The default value if a command line option is given without a value (\textquotesingle{}--command-\/line-\/option\textquotesingle{} without \textquotesingle{}=V\+A\+L\+UE\textquotesingle{}). This must be less than value\+\_\+count\+\_\+arg. \\
\hline
\end{DoxyParams}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classSys__var__multi__enum_a96baf73f0d0ef4d45e1961218771809e}\label{classSys__var__multi__enum_a96baf73f0d0ef4d45e1961218771809e}} 
\index{Sys\+\_\+var\+\_\+multi\+\_\+enum@{Sys\+\_\+var\+\_\+multi\+\_\+enum}!find\+\_\+value@{find\+\_\+value}}
\index{find\+\_\+value@{find\+\_\+value}!Sys\+\_\+var\+\_\+multi\+\_\+enum@{Sys\+\_\+var\+\_\+multi\+\_\+enum}}
\subsubsection{\texorpdfstring{find\+\_\+value()}{find\_value()}}
{\footnotesize\ttfamily int Sys\+\_\+var\+\_\+multi\+\_\+enum\+::find\+\_\+value (\begin{DoxyParamCaption}\item[{const char $\ast$}]{text }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Return the numeric value for a given alias string, or -\/1 if the string is not a valid alias. \mbox{\Hypertarget{classSys__var__multi__enum_ac0ae51abfc59daf86aeb51b29fc99164}\label{classSys__var__multi__enum_ac0ae51abfc59daf86aeb51b29fc99164}} 
\index{Sys\+\_\+var\+\_\+multi\+\_\+enum@{Sys\+\_\+var\+\_\+multi\+\_\+enum}!fixup\+\_\+command\+\_\+line@{fixup\+\_\+command\+\_\+line}}
\index{fixup\+\_\+command\+\_\+line@{fixup\+\_\+command\+\_\+line}!Sys\+\_\+var\+\_\+multi\+\_\+enum@{Sys\+\_\+var\+\_\+multi\+\_\+enum}}
\subsubsection{\texorpdfstring{fixup\+\_\+command\+\_\+line()}{fixup\_command\_line()}}
{\footnotesize\ttfamily const char$\ast$ Sys\+\_\+var\+\_\+multi\+\_\+enum\+::fixup\+\_\+command\+\_\+line (\begin{DoxyParamCaption}\item[{const char $\ast$}]{value\+\_\+str }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Because of limitations in the command-\/line parsing library, the value given on the command-\/line cannot be automatically copied to the global value. Instead, inheritants of this class should call this function from mysqld.\+cc\+:mysqld\+\_\+get\+\_\+one\+\_\+option.


\begin{DoxyParams}{Parameters}
{\em value\+\_\+str} & Pointer to the value specified on the command line (as in --option=V\+A\+L\+UE).\\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em N\+U\+LL} & Success.\\
\hline
{\em non-\/\+N\+U\+LL} & Pointer to the invalid string that was used as argument. \\
\hline
\end{DoxyRetVals}
\mbox{\Hypertarget{classSys__var__multi__enum_ab563d457fe100f28b325665858d41253}\label{classSys__var__multi__enum_ab563d457fe100f28b325665858d41253}} 
\index{Sys\+\_\+var\+\_\+multi\+\_\+enum@{Sys\+\_\+var\+\_\+multi\+\_\+enum}!global\+\_\+save\+\_\+default@{global\+\_\+save\+\_\+default}}
\index{global\+\_\+save\+\_\+default@{global\+\_\+save\+\_\+default}!Sys\+\_\+var\+\_\+multi\+\_\+enum@{Sys\+\_\+var\+\_\+multi\+\_\+enum}}
\subsubsection{\texorpdfstring{global\+\_\+save\+\_\+default()}{global\_save\_default()}}
{\footnotesize\ttfamily void Sys\+\_\+var\+\_\+multi\+\_\+enum\+::global\+\_\+save\+\_\+default (\begin{DoxyParamCaption}\item[{T\+HD $\ast$}]{thd,  }\item[{\mbox{\hyperlink{classset__var}{set\+\_\+var}} $\ast$}]{var }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}

save the global default value of the variable in var 

Implements \mbox{\hyperlink{classsys__var}{sys\+\_\+var}}.

\mbox{\Hypertarget{classSys__var__multi__enum_a0590426cff9c64e48b5edef6791f218e}\label{classSys__var__multi__enum_a0590426cff9c64e48b5edef6791f218e}} 
\index{Sys\+\_\+var\+\_\+multi\+\_\+enum@{Sys\+\_\+var\+\_\+multi\+\_\+enum}!session\+\_\+save\+\_\+default@{session\+\_\+save\+\_\+default}}
\index{session\+\_\+save\+\_\+default@{session\+\_\+save\+\_\+default}!Sys\+\_\+var\+\_\+multi\+\_\+enum@{Sys\+\_\+var\+\_\+multi\+\_\+enum}}
\subsubsection{\texorpdfstring{session\+\_\+save\+\_\+default()}{session\_save\_default()}}
{\footnotesize\ttfamily void Sys\+\_\+var\+\_\+multi\+\_\+enum\+::session\+\_\+save\+\_\+default (\begin{DoxyParamCaption}\item[{T\+HD $\ast$}]{thd,  }\item[{\mbox{\hyperlink{classset__var}{set\+\_\+var}} $\ast$}]{var }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}

save the session default value of the variable in var 

Implements \mbox{\hyperlink{classsys__var}{sys\+\_\+var}}.

\mbox{\Hypertarget{classSys__var__multi__enum_a70b21626366df65d6fa0b43b7d89b594}\label{classSys__var__multi__enum_a70b21626366df65d6fa0b43b7d89b594}} 
\index{Sys\+\_\+var\+\_\+multi\+\_\+enum@{Sys\+\_\+var\+\_\+multi\+\_\+enum}!session\+\_\+value\+\_\+ptr@{session\+\_\+value\+\_\+ptr}}
\index{session\+\_\+value\+\_\+ptr@{session\+\_\+value\+\_\+ptr}!Sys\+\_\+var\+\_\+multi\+\_\+enum@{Sys\+\_\+var\+\_\+multi\+\_\+enum}}
\subsubsection{\texorpdfstring{session\+\_\+value\+\_\+ptr()}{session\_value\_ptr()}}
{\footnotesize\ttfamily uchar$\ast$ Sys\+\_\+var\+\_\+multi\+\_\+enum\+::session\+\_\+value\+\_\+ptr (\begin{DoxyParamCaption}\item[{T\+HD $\ast$}]{running\+\_\+thd,  }\item[{T\+HD $\ast$}]{target\+\_\+thd,  }\item[{L\+E\+X\+\_\+\+S\+T\+R\+I\+NG $\ast$}]{base }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}

A pointer to a value of the variable for S\+H\+OW. It must be of show\+\_\+val\+\_\+type type (bool for S\+H\+O\+W\+\_\+\+B\+O\+OL, int for S\+H\+O\+W\+\_\+\+I\+NT, longlong for S\+H\+O\+W\+\_\+\+L\+O\+N\+G\+L\+O\+NG, etc). 

Reimplemented from \mbox{\hyperlink{classsys__var_a3e511591aaf555d2bc2ce40a80b7e899}{sys\+\_\+var}}.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{sys__vars_8h}{sys\+\_\+vars.\+h}}\end{DoxyCompactItemize}
